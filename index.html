<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'en'
  };
</script>

  <title>Hexo</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Hexo</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/03/03/canvas%E7%BB%98%E5%88%B6dom/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/03/03/canvas%E7%BB%98%E5%88%B6dom/" class="post-title-link" itemprop="url">canvasç»˜åˆ¶dom</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-03-03 15:36:39" itemprop="dateCreated datePublished" datetime="2022-03-03T15:36:39+08:00">2022-03-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-03-05 10:56:59" itemprop="dateModified" datetime="2022-03-05T10:56:59+08:00">2022-03-05</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="å®ç°æ€è·¯å€’æ¨"><a href="#å®ç°æ€è·¯å€’æ¨" class="headerlink" title="å®ç°æ€è·¯å€’æ¨"></a>å®ç°æ€è·¯å€’æ¨</h2><ol>
<li>ç»˜åˆ¶canvaséœ€è¦ä¸€å¼ å›¾ç‰‡è¿›è¡Œè½¬æ¢ï¼Œå›¾ç‰‡ä»å“ªé‡Œæ¥ï¼Ÿ</li>
<li>å›¾ç‰‡æ˜¯ç”± svg å…ƒç´ è½¬æ¢è€Œæ¥ï¼Œsrcæ ¼å¼ä¸º data:image /svg+xml SVGDomElement;svgå…ƒç´ ä»å“ªé‡Œæ¥ï¼Ÿ</li>
<li>svgä¸­åŒ…å« foreignObject å…ƒç´ ï¼Œé‡Œé¢çš„å†…å®¹éœ€è¦ XHTML;XHTMLä»å“ªé‡Œæ¥?</li>
<li>é€šè¿‡ XMLSerializer æ–¹æ³•å°† HTML å…ƒç´ åºåˆ—åŒ–ä¸º XHTML;HTMLä»å“ªé‡Œæ¥</li>
<li>HTMLä»ä¼ å…¥çš„DOMè½¬æ¢è€Œæ¥ï¼Œå¹¶ä¸”éœ€è¦éå†ã€å¤„ç†æ ·å¼ã€å¤„ç†å›¾ç‰‡</li>
</ol>
<h2 id="æ­£å‘å®ç°"><a href="#æ­£å‘å®ç°" class="headerlink" title="æ­£å‘å®ç°"></a>æ­£å‘å®ç°</h2><ol>
<li>è·å¾— HTMLï¼Œéœ€è¦éå†DOMæ ‘çš„æ–¹æ³•</li>
<li>å¤„ç†æ ·å¼</li>
<li>å¤„ç†å›¾ç‰‡</li>
<li>åˆ›å»º XHTML</li>
<li>åˆ›å»º SVGDomElement</li>
<li>åˆ›å»ºå›¾ç‰‡</li>
<li>åˆ›å»º canvas</li>
</ol>
<h2 id="å·¥å…·æ–¹æ³•"><a href="#å·¥å…·æ–¹æ³•" class="headerlink" title="å·¥å…·æ–¹æ³•"></a>å·¥å…·æ–¹æ³•</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">/** éå†DOM Tree */</span><br><span class="line">export const DFSDomTraversal = (root:HTMLElement):HTMLElement[] | undefined =&gt; &#123;</span><br><span class="line">  if (!root) return</span><br><span class="line"></span><br><span class="line">  const arr:HTMLElement[] = []</span><br><span class="line">  const queue = [root]</span><br><span class="line">  let node:any = queue.shift()</span><br><span class="line"></span><br><span class="line">  while (node) &#123;</span><br><span class="line">    arr.push(node)</span><br><span class="line">    if (node.children.length) &#123;</span><br><span class="line">      for (let i = node.children.length - 1; i &gt;= 0; i--) &#123;</span><br><span class="line">        queue.unshift(node.children[i])</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    node = queue.shift()</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return arr</span><br><span class="line">&#125;</span><br><span class="line">/** å¤åˆ¶çš„æ ·å¼ */</span><br><span class="line">const CSSRules = [</span><br><span class="line">  &#x27;width&#x27;,</span><br><span class="line">  &#x27;height&#x27;,</span><br><span class="line">  &#x27;margin&#x27;,</span><br><span class="line">  &#x27;margin-top&#x27;,</span><br><span class="line">  &#x27;margin-right&#x27;,</span><br><span class="line">  &#x27;margin-bottom&#x27;,</span><br><span class="line">  &#x27;margin-left&#x27;,</span><br><span class="line">  &#x27;border&#x27;,</span><br><span class="line">  &#x27;border-radius&#x27;,</span><br><span class="line">  &#x27;border-top&#x27;,</span><br><span class="line">  &#x27;border-right&#x27;,</span><br><span class="line">  &#x27;border-bottom&#x27;,</span><br><span class="line">  &#x27;border-left&#x27;,</span><br><span class="line">  &#x27;padding&#x27;,</span><br><span class="line">  &#x27;padding-top&#x27;,</span><br><span class="line">  &#x27;padding-right&#x27;,</span><br><span class="line">  &#x27;padding-bottom&#x27;,</span><br><span class="line">  &#x27;padding-left&#x27;,</span><br><span class="line">  &#x27;position&#x27;,</span><br><span class="line">  &#x27;top&#x27;,</span><br><span class="line">  &#x27;right&#x27;,</span><br><span class="line">  &#x27;bottom&#x27;,</span><br><span class="line">  &#x27;left&#x27;,</span><br><span class="line">  &#x27;display&#x27;,</span><br><span class="line">  &#x27;flex-direction&#x27;,</span><br><span class="line">  &#x27;flex&#x27;,</span><br><span class="line">  &#x27;align-items&#x27;,</span><br><span class="line">  &#x27;background&#x27;,</span><br><span class="line">  &#x27;line-height&#x27;,</span><br><span class="line">  &#x27;font-family&#x27;,</span><br><span class="line">  &#x27;font-size&#x27;,</span><br><span class="line">  &#x27;color&#x27;,</span><br><span class="line">  &#x27;box-sizing&#x27;,</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">export const copyStyle = (element) =&gt; &#123;</span><br><span class="line">  const styles = getComputedStyle(element)</span><br><span class="line"></span><br><span class="line">  CSSRules.forEach((rule) =&gt; &#123;</span><br><span class="line">    element.style.setProperty(rule, styles.getPropertyValue(rule))</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">/** å¤„ç†å›¾åƒèµ„æº */</span><br><span class="line">export const img2base64 = (element) =&gt; new Promise&lt;string&gt;((resolve, reject) =&gt; &#123;</span><br><span class="line">  const img = new Image()</span><br><span class="line"></span><br><span class="line">  /** å¤„ç† canvas å—æ±¡æŸ“çš„æƒ…å†µ */</span><br><span class="line">  img.crossOrigin = &#x27;anonymous&#x27;</span><br><span class="line"></span><br><span class="line">  img.onerror = reject</span><br><span class="line">  img.onload = function () &#123;</span><br><span class="line">    const canvas = document.createElement(&#x27;canvas&#x27;)</span><br><span class="line">    const ctx = canvas.getContext(&#x27;2d&#x27;)</span><br><span class="line"></span><br><span class="line">    canvas.width = this.naturalWidth</span><br><span class="line">    canvas.height = this.naturalHeight</span><br><span class="line">    ctx?.drawImage(this, 0, 0)</span><br><span class="line">    resolve(canvas.toDataURL())</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  img.src = element.src</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="å…·ä½“å®ç°"><a href="#å…·ä½“å®ç°" class="headerlink" title="å…·ä½“å®ç°"></a>å…·ä½“å®ç°</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">import &#123; copyStyle, DFSDomTraversal, img2base64 &#125; from &#x27;./tool&#x27;</span><br><span class="line"></span><br><span class="line">export const dom2base64 = async (root:HTMLElement, dpr = window.devicePixelRatio) =&gt; &#123;</span><br><span class="line">  console.log(root, &#x27;root&#x27;)</span><br><span class="line">  DFSDomTraversal(root)?.forEach(copyStyle)</span><br><span class="line"></span><br><span class="line">  const imgElements = [...root.querySelectorAll(&#x27;img&#x27;)]</span><br><span class="line"></span><br><span class="line">  const base64Result:string[] = await Promise.all(imgElements.map(img2base64))</span><br><span class="line"></span><br><span class="line">  const width = root.offsetWidth</span><br><span class="line">  const height = root.offsetHeight</span><br><span class="line">  let XHTML = new XMLSerializer().serializeToString(root)</span><br><span class="line"></span><br><span class="line">  imgElements.forEach((element, index) =&gt; &#123;</span><br><span class="line">    XHTML = XHTML.replace(element.src, base64Result[index])</span><br><span class="line">  &#125;)</span><br><span class="line">  const SVGDomElement = `&lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; height=&quot;$&#123;height&#125;&quot; width=&quot;$&#123;width&#125;&quot;&gt;</span><br><span class="line">                            &lt;foreignObject height=&quot;100%&quot; width=&quot;100%&quot;&gt;$&#123;XHTML&#125;&lt;/foreignObject&gt;</span><br><span class="line">                        &lt;/svg&gt;`</span><br><span class="line"></span><br><span class="line">  const canvas = document.createElement(&#x27;canvas&#x27;)</span><br><span class="line">  const ctx = canvas.getContext(&#x27;2d&#x27;)</span><br><span class="line"></span><br><span class="line">  canvas.width = width * dpr</span><br><span class="line">  canvas.height = height * dpr</span><br><span class="line">  canvas.style.width = `$&#123;width&#125;px`</span><br><span class="line">  canvas.style.height = `$&#123;height&#125;px`</span><br><span class="line"></span><br><span class="line">  const img = new Image()</span><br><span class="line"></span><br><span class="line">  img.onload = function () &#123;</span><br><span class="line">    ctx.scale(dpr, dpr)</span><br><span class="line">    ctx.drawImage(this, 0, 0)</span><br><span class="line">    canvas.toBlob((blob) =&gt; &#123;</span><br><span class="line">      navigator.clipboard.write(</span><br><span class="line">        [</span><br><span class="line">          new window.ClipboardItem(&#123;</span><br><span class="line">            &#x27;image/png&#x27;: blob,</span><br><span class="line">          &#125;),</span><br><span class="line">        ],</span><br><span class="line">      )</span><br><span class="line">      console.log(blob, &#x27;blob&#x27;)</span><br><span class="line">      console.log(img.src)</span><br><span class="line">    &#125;)</span><br><span class="line">    // console.log(canvas, &#x27;canvas&#x27;)</span><br><span class="line">    // return canvas</span><br><span class="line">    // document.body.appendChild(canvas)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  img.src = `data:image/svg+xml,$&#123;SVGDomElement&#125;`</span><br><span class="line">  console.log(img.src)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/04/%E6%A8%8A%E7%99%BB%E7%9A%849%E5%A0%82%E5%95%86%E4%B8%9A%E8%AF%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/04/%E6%A8%8A%E7%99%BB%E7%9A%849%E5%A0%82%E5%95%86%E4%B8%9A%E8%AF%BE/" class="post-title-link" itemprop="url">æ¨Šç™»çš„9å ‚å•†ä¸šè¯¾</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-02-04 21:06:25" itemprop="dateCreated datePublished" datetime="2022-02-04T21:06:25+08:00">2022-02-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-02-07 18:53:43" itemprop="dateModified" datetime="2022-02-07T18:53:43+08:00">2022-02-07</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="æå‡é¢†å¯¼åŠ›çš„å››é‡ä¿®ç‚¼"><a href="#æå‡é¢†å¯¼åŠ›çš„å››é‡ä¿®ç‚¼" class="headerlink" title="æå‡é¢†å¯¼åŠ›çš„å››é‡ä¿®ç‚¼"></a>æå‡é¢†å¯¼åŠ›çš„å››é‡ä¿®ç‚¼</h2><h3 id="å»ºç«‹ä¿¡ä»»"><a href="#å»ºç«‹ä¿¡ä»»" class="headerlink" title="å»ºç«‹ä¿¡ä»»"></a>å»ºç«‹ä¿¡ä»»</h3><p>å½“æ™®é€šå‘˜å·¥å˜ä¸ºé¢†å¯¼è€…çš„æ—¶å€™ï¼Œä¸€ç±»å¦‚é±¼å¾—æ°´ï¼Œå¦å¤–ä¸€ç±»å´æ˜¯è§‰å¾—è¿˜ä¸å¦‚æ™®é€šå‘˜å·¥ï¼Œè¿™æ˜¯å› ä¸ºæ€ç»´è¿˜åœç•™åœ¨æ‰§è¡Œè€…çš„å±‚é¢ï¼Œæ²¡æœ‰å»ºç«‹èµ·â€œé€šè¿‡åˆ«äººâ€çš„æ ¸å¿ƒ</p>
<h3 id="å»ºç«‹å›¢é˜Ÿ"><a href="#å»ºç«‹å›¢é˜Ÿ" class="headerlink" title="å»ºç«‹å›¢é˜Ÿ"></a>å»ºç«‹å›¢é˜Ÿ</h3><p>å­¦ä¼šæ”¾æ‰‹ï¼Œå›¢é˜Ÿè‡ªæˆ‘è¿›åŒ–ï¼Œè€Œä¸æ˜¯æ—¶æ—¶åˆ»åˆ»ç›¯ç€å›¢é˜Ÿåšäº‹</p>
<h3 id="å»ºç«‹ä½“ç³»"><a href="#å»ºç«‹ä½“ç³»" class="headerlink" title="å»ºç«‹ä½“ç³»"></a>å»ºç«‹ä½“ç³»</h3><p>ç›®çš„æ˜¯ä¸ºäº†å½“é¢†å¯¼è€…ä¸åœ¨çš„æ—¶å€™å›¢é˜Ÿä¹Ÿèƒ½æ­£å¸¸å·¥ä½œ<br>å¦‚ä½•å»ºç«‹ä½“ç³»ï¼Ÿ</p>
<ol>
<li>åˆ¶å®šæ ‡å‡†ï¼Œä»¥éº¦å½“åŠ³çš„æ–‡åŒ–ä¸ºä¾‹ï¼Œéº¦å½“åŠ³è§„å®šé¢åŒ…çš„åšåº¦ã€è¶…æ—¶å¤šä¹…çš„é£Ÿç‰©éœ€è¦ä¸¢æ‰</li>
<li>å¼•è¿›æŠ€æœ¯ï¼Œæ ‡å‡†çš„åˆ¶å®šæ˜¯ç®€å•çš„ï¼Œä½†æƒ³è¦è¿™ä¸ªæ ‡å‡†è¢«æ‰§è¡Œï¼ŒæŠ€æ§æ›´èƒ½æœäºº</li>
</ol>
<h3 id="å»ºç«‹æ–‡åŒ–"><a href="#å»ºç«‹æ–‡åŒ–" class="headerlink" title="å»ºç«‹æ–‡åŒ–"></a>å»ºç«‹æ–‡åŒ–</h3><p>å»ºç«‹ä¼ä¸šæ–‡åŒ–èƒ½å°†å‘˜å·¥åœ¨ç²¾ç¥å±‚é¢è¾¾åˆ°ä¸€è‡´</p>
<h2 id="æ˜ç¡®è§’è‰²åœ°ä½ï¼Œé¿å…äº²åŠ›äº²ä¸º"><a href="#æ˜ç¡®è§’è‰²åœ°ä½ï¼Œé¿å…äº²åŠ›äº²ä¸º" class="headerlink" title="æ˜ç¡®è§’è‰²åœ°ä½ï¼Œé¿å…äº²åŠ›äº²ä¸º"></a>æ˜ç¡®è§’è‰²åœ°ä½ï¼Œé¿å…äº²åŠ›äº²ä¸º</h2><h3 id="ç®¡ç†è€…æ˜¯ä»€ä¹ˆï¼Ÿç®¡ç†è€…ä¸æ™®é€šå‘˜å·¥çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ"><a href="#ç®¡ç†è€…æ˜¯ä»€ä¹ˆï¼Ÿç®¡ç†è€…ä¸æ™®é€šå‘˜å·¥çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="ç®¡ç†è€…æ˜¯ä»€ä¹ˆï¼Ÿç®¡ç†è€…ä¸æ™®é€šå‘˜å·¥çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ"></a>ç®¡ç†è€…æ˜¯ä»€ä¹ˆï¼Ÿç®¡ç†è€…ä¸æ™®é€šå‘˜å·¥çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿ</h3><ol>
<li>ç®¡ç†è€…å°±æ˜¯é€šè¿‡åˆ«äººå®Œæˆä»»åŠ¡<br>å…¶ä¸­â€œé€šè¿‡åˆ«äººâ€è¿™ä¸€ç‚¹æ¯”è¾ƒéš¾ï¼Œæœ‰çš„ç®¡ç†è€…å°†æ´»å…¨æ´¾ç»™æ‰‹ä¸‹ï¼Œè‡ªå·±ä¸€ç‚¹ä¹Ÿä¸åšï¼Œè€Œæœ‰çš„ç®¡ç†è€…æ‹…å¿ƒå‘˜å·¥å®Œæˆä¸å¥½è¿™äº›å·¥ä½œï¼Œæ—¶æ—¶åˆ»åˆ»ç›¯ç€å‘˜å·¥åšäº‹æˆ–è€…æ˜¯è‡ªå·±å…¨éƒ¨åšäº†</li>
<li>ç®¡ç†è€…çš„èŒè´£: åŸ¹å…»å‘˜å·¥å’Œæ‰“é€ å›¢é˜Ÿï¼Œåˆ‡è®°è¶Šä¿ä»£åº–ï¼Œä¹Ÿåˆ‡è®°ç‹¬æ½å…¨æ´»</li>
<li>å¦‚ä½•è®©æ‰‹ä¸‹çš„äººæœä½ ï¼Ÿ<br>æƒ³è®©æ‰‹ä¸‹çš„äººæœä»å¹¶ä¸æ˜¯è¦â€æ¯”æ‰€æœ‰äººéƒ½å¼ºâ€œï¼Œåœ¨ä¼˜ç§€çš„å›¢é˜Ÿé‡Œæ˜¯æ— æ³•åšåˆ°è¿™ç‚¹çš„ï¼Œæƒ³è¦å¾—åˆ°å‘˜å·¥çš„å°Šé‡å’Œæœä»ï¼Œéœ€è¦</li>
<li>æŒæ¡å¥½å¤§æ–¹å‘</li>
<li>å­¦ä¼šæˆæƒï¼Œå…è®¸å‘˜å·¥çŠ¯é”™</li>
</ol>
<h2 id="ç®¡ç†è€…çš„ä¸‰ç§è§’è‰²"><a href="#ç®¡ç†è€…çš„ä¸‰ç§è§’è‰²" class="headerlink" title="ç®¡ç†è€…çš„ä¸‰ç§è§’è‰²"></a>ç®¡ç†è€…çš„ä¸‰ç§è§’è‰²</h2><h3 id="å¤§å¤šæ•°ä¸­å›½ç®¡ç†è€…çš„æ—¥å¸¸"><a href="#å¤§å¤šæ•°ä¸­å›½ç®¡ç†è€…çš„æ—¥å¸¸" class="headerlink" title="å¤§å¤šæ•°ä¸­å›½ç®¡ç†è€…çš„æ—¥å¸¸"></a>å¤§å¤šæ•°ä¸­å›½ç®¡ç†è€…çš„æ—¥å¸¸</h3><ol>
<li>åªé¡¾è‡ªå·±åšäº‹ï¼Œæ²¡åšå¥½åè°ƒ â€”â€”&gt;  è‡ªå·±çš„éƒ¨åˆ†å®Œæˆäº†ï¼Œå…¶ä»–äººçš„éƒ¨åˆ†è¿˜å·®å¾ˆå¤š</li>
<li>å¤§å¤šæ•°æ—¶é—´åœ¨å¸®å¿™â€å–„åâ€œ â€”â€”&gt; æ²¡æ—¶é—´åšè‡ªå·±çš„å·¥ä½œ</li>
<li>â€œä¸¤å¤´ä¸æ˜¯äººâ€ â€”â€”&gt; åœ¨å‘˜å·¥å’Œä¸Šå¸ä¹‹é—´çš„å½¢è±¡éƒ½ä¸å¥½<br>å‡ºç°ä¸Šè¿°æƒ…å†µçš„åŸå› æ˜¯æ²¡æœ‰æ˜ç¡®å¥½ç®¡ç†è€…çš„å®šä½</li>
</ol>
<h3 id="æ˜ç¡®ç®¡ç†è€…çš„å®šä½"><a href="#æ˜ç¡®ç®¡ç†è€…çš„å®šä½" class="headerlink" title="æ˜ç¡®ç®¡ç†è€…çš„å®šä½"></a>æ˜ç¡®ç®¡ç†è€…çš„å®šä½</h3><ol>
<li>ä¸‹å±‚ç®¡ç†ï¼Œä½¿å‘½å¿…è¾¾ï¼Œæ— è®ºä½¿ç”¨ä»€ä¹ˆæ‰‹æ®µéƒ½è¦èƒ½å®Œæˆä»»åŠ¡</li>
<li>ä¸­å±‚ç®¡ç†ï¼Œé¢é¢ä¿±åˆ°ï¼Œç›¸å½“äºå¤§ç®¡å®¶ä¸€æ ·ï¼Œèƒ½å¤Ÿä¼ è¾¾ä¸Šçº§æŒ‡ä»¤ã€æ‹†åˆ†ä»»åŠ¡ã€ä¸å…¶ä»–éƒ¨é—¨åè°ƒç­‰ç­‰</li>
<li>é«˜å±‚é¢†å¯¼ï¼Œè¥é€ æ°”æ°›</li>
</ol>
<h2 id="ç”¨æ¸¸æˆçš„æ€ç»´è®©å·¥ä½œå˜å¾—æœ‰è¶£"><a href="#ç”¨æ¸¸æˆçš„æ€ç»´è®©å·¥ä½œå˜å¾—æœ‰è¶£" class="headerlink" title="ç”¨æ¸¸æˆçš„æ€ç»´è®©å·¥ä½œå˜å¾—æœ‰è¶£"></a>ç”¨æ¸¸æˆçš„æ€ç»´è®©å·¥ä½œå˜å¾—æœ‰è¶£</h2><ol>
<li>è®¾ç½®æ˜ç¡®çš„å›¢é˜Ÿæ¸¸æˆç›®æ ‡ â€”â€”&gt; ä¾‹å¦‚çŸ¥è¡£çš„æ„¿æ™¯å°±æ˜¯æˆä¸ºåŠ©åŠ›æœè£…è¡Œä¸šé¢†åŸŸçš„å¤´éƒ¨ç©å®¶</li>
<li>è®¾ç½®æ¸¸æˆè§„åˆ™ â€”â€”&gt; å‘˜å·¥åªéœ€è¦éµå¾ªæ¸¸æˆè§„åˆ™ï¼Œè€Œä¸ç”¨ç‰¹æ„åœ°å»è®¨å¥½ç®¡ç†è€…</li>
<li>å»ºç«‹åŠæ—¶çš„åé¦ˆ â€”â€”&gt; ç®¡ç†è€…éœ€è¦ç»™å‘˜å·¥åŠæ—¶çš„åé¦ˆï¼Œå¼€ä¼šçš„æ—¶å€™ä¸€å¼€å§‹å°±è¿›å…¥å·¥ä½œå†…å®¹ä¼šè®©äººè§‰å¾—æ— è¶£</li>
<li>æ‰¾åˆ°è‡ªæ„¿åŠ å…¥çš„äºº â€”â€”&gt; æ‰¾åˆ°æ„¿æ„å’Œå…¬å¸ä¸€èµ·æˆé•¿çš„å‘˜å·¥</li>
</ol>
<h2 id="æ²Ÿé€šçš„å››å¤§è±¡é™"><a href="#æ²Ÿé€šçš„å››å¤§è±¡é™" class="headerlink" title="æ²Ÿé€šçš„å››å¤§è±¡é™"></a>æ²Ÿé€šçš„å››å¤§è±¡é™</h2><h3 id="éšç§è±¡é™"><a href="#éšç§è±¡é™" class="headerlink" title="éšç§è±¡é™"></a>éšç§è±¡é™</h3><p>éšç§è±¡é™å°±æ˜¯æŒ‡è‡ªå·±çŸ¥é“ä½†åˆ«äººä¸çŸ¥é“çš„äº‹æƒ…ï¼Œéšç§è±¡é™åˆåˆ†ä¸ºä¸‰ä¸ªå±‚æ¬¡</p>
<ol>
<li>DDSã€deep dark secretã€‘<br>è¿™å—æŒ‡çš„æ˜¯äººå†…å¿ƒæ·±å¤„ä¸æ„¿æ„ä¸ºäººæ‰€çŸ¥çš„é»‘æš—éƒ¨åˆ†ï¼Œäººé™…äº¤å¾€è¿‡ç¨‹ä¸­å°½å¯èƒ½ä¸è¦è§¦åŠåˆ°åˆ«äººçš„DDSï¼Œä»¤äººä¸é€‚</li>
<li>ä¸å¥½æ„æ€è¯´<br>ä¾‹å¦‚å‘˜å·¥çŠ¯äº†é”™è¯¯ä½†é¢†å¯¼ä¸å¥½æ„æ€æŒ‡å‡ºè¯¥å‘˜å·¥çš„é”™è¯¯ï¼Œå¯¼è‡´å‘˜å·¥åœ¨ä¸‹æ¬¡ä»ç„¶çŠ¯ä¸€æ ·çš„é”™è¯¯ï¼Œæ²¡æœ‰æ”¹æ­£</li>
<li>å¿˜äº†è¯´<br>å¿˜è®°è¯´æ¯”â€ä¸å¥½æ„æ€è¯´â€œçš„å±‚æ¬¡æ›´ä¸ºä¸¥é‡ï¼Œä¾‹å¦‚å¿˜è®°å¤¸å¥–è¡¨ç°å¥½çš„å‘˜å·¥ã€å¿˜è®°å¯¹å­å¥³è¡¨è¾¾çˆ±ï¼Œå´ä¼šåœ¨å‘˜å·¥çŠ¯é”™ã€å­å¥³çŠ¯é”™çš„æ—¶å€™è¿›è¡ŒæŒ‡è´£ï¼Œä¼šç»™äººä¸€ç§â€æˆ‘å¾ˆå·®åŠ²â€œâ€ä½ å¯¹æˆ‘å¾ˆä¸æ»¡æ„â€œçš„é”™è§‰</li>
</ol>
<h3 id="ç›²ç‚¹è±¡é™"><a href="#ç›²ç‚¹è±¡é™" class="headerlink" title="ç›²ç‚¹è±¡é™"></a>ç›²ç‚¹è±¡é™</h3><p>é€šè¿‡ä»–äººæ¥çœ‹åˆ°è‡ªå·±çš„ä¸è¶³ä¹‹å¤„å¹¶åŠ ä»¥æ”¹è¿›</p>
<h3 id="æ½œèƒ½è±¡é™"><a href="#æ½œèƒ½è±¡é™" class="headerlink" title="æ½œèƒ½è±¡é™"></a>æ½œèƒ½è±¡é™</h3><p>æ¯ä¸ªå‘˜å·¥éƒ½æœ‰æœªè¢«å‘ç°çš„æ½œèƒ½ï¼Œè¦å–„äºå‘ç°ä»–ä»¬çš„æ½œèƒ½å¹¶ä¸”å¸®åŠ©ä»–ä»¬æˆé•¿</p>
<h3 id="å…¬å¼€è±¡é™"><a href="#å…¬å¼€è±¡é™" class="headerlink" title="å…¬å¼€è±¡é™"></a>å…¬å¼€è±¡é™</h3><p>ä¸éšç§è±¡é™ä¸åŒï¼Œå…¬å¼€è±¡é™æ˜¯è‡ªå·±çŸ¥é“ä¹Ÿå…è®¸åˆ«äººçŸ¥é“çš„éƒ¨åˆ†ï¼Œå…¬å¼€è±¡é™çš„å¥½å¤„åœ¨äºå¢åŠ ç¤¾ä¼šå½±å“åº¦å’Œä¿¡ä»»åº¦<br>å¦‚ä½•å¢å¤§è‡ªå·±çš„å…¬å¼€è±¡é™ï¼Ÿ</p>
<ol>
<li>è½¬æ¢ä¸€éƒ¨åˆ†éšç§è±¡é™ï¼ŒæŠŠè‡ªå·±çš„ä¸€äº›ç”Ÿæ´»ç»å†ä¸ä»–äººåˆ†äº«</li>
<li>è½¬æ¢ä¸€éƒ¨åˆ†ç›²ç‚¹ç›¸ä¿¡ï¼Œå…è®¸ä»–äººæŒ‡å‡ºè‡ªå·±çš„ç›²ç‚¹</li>
</ol>
<h2 id="å­¦ä¼šå€¾å¬"><a href="#å­¦ä¼šå€¾å¬" class="headerlink" title="å­¦ä¼šå€¾å¬"></a>å­¦ä¼šå€¾å¬</h2><ol>
<li>å»ºç«‹æƒ…æ„Ÿè´¦æˆ·ï¼Œå½“å¯¹å‘˜å·¥è¿›è¡Œæ‰¹è¯„å’Œå»ºè®®çš„æ—¶å€™ä¸è®©å¯¹æ–¹è®¤ä¸ºè‡ªå·±æ˜¯ä»—ç€èŒä½è®­æ–¥</li>
<li>å¸æ”¶å¯¹æ–¹çš„ä¿¡æ¯ï¼Œæ ¹æ®â€æ¼æ–—ç†è®ºâ€œï¼Œç®¡ç†è€…æƒ³çš„100%å†…å®¹ï¼Œè¯´å‡ºæ¥çš„åªæœ‰80ï¼Œç”±äºæ–‡åŒ–æ°´å¹³å·®å¼‚å¯¼è‡´å‘˜å·¥æ¥æ”¶çš„åªæœ‰60ï¼Œå‘˜å·¥æ¶ˆåŒ–è¿‡åå‰©ä¸‹40ï¼Œå†å»æ‰§è¡Œçš„æ—¶å€™åªæœ‰å‰©ä¸‹20</li>
<li>è‚¢ä½“åŠ¨ä½œæ¯”è¯­è¨€æ›´é‡è¦ï¼Œä¸è¦è®©å¯¹æ–¹è¯¯è§£ä½ æ˜¯ä¸è€çƒ¦</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/02/04/React%E5%9F%BA%E7%A1%80%E5%B7%A9%E5%9B%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/04/React%E5%9F%BA%E7%A1%80%E5%B7%A9%E5%9B%BA/" class="post-title-link" itemprop="url">ReactåŸºç¡€å·©å›º</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2022-02-04 11:19:04 / Modified: 11:37:42" itemprop="dateCreated datePublished" datetime="2022-02-04T11:19:04+08:00">2022-02-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Reactçš„å¥½å¤„"><a href="#Reactçš„å¥½å¤„" class="headerlink" title="Reactçš„å¥½å¤„"></a>Reactçš„å¥½å¤„</h2><ol>
<li>ç»„ä»¶åŒ– </li>
<li>å£°æ˜å¼ç¼–ç¨‹</li>
<li>ç§»åŠ¨ç«¯</li>
<li>è™šæ‹Ÿdomå’Œdiffingç®—æ³•</li>
</ol>
<h2 id="åŸç”Ÿjsç¼ºç‚¹"><a href="#åŸç”Ÿjsç¼ºç‚¹" class="headerlink" title="åŸç”Ÿjsç¼ºç‚¹"></a>åŸç”Ÿjsç¼ºç‚¹</h2><ol>
<li>æ•ˆç‡ä½</li>
<li>é‡ç»˜é‡æ’</li>
<li>ä¸å¥½å¤ç”¨</li>
<li>å‘½ä»¤å¼ç¼–ç¨‹</li>
</ol>
<h2 id="ç”¨jqueryçš„æ–¹å¼æ‰“å¼€react"><a href="#ç”¨jqueryçš„æ–¹å¼æ‰“å¼€react" class="headerlink" title="ç”¨jqueryçš„æ–¹å¼æ‰“å¼€react"></a>ç”¨jqueryçš„æ–¹å¼æ‰“å¼€react</h2><p>scriptä¸­çš„typeä½¿ç”¨ text/babel<br>å»¶ä¼¸ï¼šscriptæœ‰å“ªå‡ ç§typeï¼Ÿ<br>jsxæ˜¯è¯­æ³•ç³– jsè¯­æ³•æ‰©å±• jsâ•xml<br>è™šæ‹Ÿdomæ˜¯object reactå†…éƒ¨ä½¿ç”¨ è½¬æ¢ä¸ºçœŸå®dom</p>
<p>ä¸¥æ ¼æ¨¡å¼ ç¦æ­¢è‡ªå®šä¹‰å‡½æ•°thisæŒ‡å‘window</p>
<h2 id="ç±»ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§å±æ€§"><a href="#ç±»ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§å±æ€§" class="headerlink" title="ç±»ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§å±æ€§"></a>ç±»ç»„ä»¶å®ä¾‹çš„ä¸‰å¤§å±æ€§</h2><ul>
<li><p>state<br>ç±»ä¸­è‡ªå®šä¹‰çš„æ–¹æ³•é»˜è®¤å¼€å¯å±€éƒ¨ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥ç›´æ¥è°ƒç”¨ç‚¹ç»“æœä¸ºundefined<br>ç±»ç»„ä»¶çš„æ–¹æ³•æ˜¯æŒ‚åœ¨åŸå‹ä¸Šï¼Œéœ€è¦å°†è¿™äº›æ–¹æ³•é€šè¿‡bindç»‘å®šåœ¨å®ä¾‹ä¸Š</p>
</li>
<li><p>props<br>ç»™ç±»å¢åŠ propTypesæ¥é™åˆ¶<br>å¯ä»¥åœ¨ç±»ä¸­é€šè¿‡staticçš„æ–¹å¼åœ¨ç±»ä¸Šå¢åŠ </p>
</li>
<li><p>refs</p>
</li>
</ul>
<ol>
<li>å®˜æ–¹ä¸æ¨èä½¿ç”¨ref=å­—ç¬¦ä¸²å½¢å¼ æ€§èƒ½é—®é¢˜</li>
<li>æ¨èä½¿ç”¨å›è°ƒå‡½æ•°å½¢å¼<br>å†…è”ç»‘å®š æ¯æ¬¡æ›´æ–°è°ƒç”¨ä¸¤æ¬¡ ç¬¬ä¸€æ¬¡ä¸ºnull ç¬¬äºŒæ¬¡æœ‰å€¼<br>åœ¨ç±»ä¸­å®šä¹‰å®ä¾‹æ–¹æ³• ä¸ä¼šå‡ºç°null</li>
<li>ä½¿ç”¨createRefåˆ›å»ºä¸€ä¸ªå®¹å™¨å­˜å‚¨ref</li>
</ol>
<h2 id="éå—æ§ç»„ä»¶ä¸å—æ§ç»„ä»¶"><a href="#éå—æ§ç»„ä»¶ä¸å—æ§ç»„ä»¶" class="headerlink" title="éå—æ§ç»„ä»¶ä¸å—æ§ç»„ä»¶"></a>éå—æ§ç»„ä»¶ä¸å—æ§ç»„ä»¶</h2><ol>
<li>éå—æ§ç»„ä»¶ ç°ç”¨ç°å– ä½¿ç”¨ref</li>
<li>å—æ§ç»„ä»¶ éšç€è¾“å…¥ç»´æŠ¤çŠ¶æ€ è¡¨å•ç»„ä»¶ä¸­é€šè¿‡onchangeæ–¹æ³•å°†å€¼å­˜å…¥stateä¸­<br>å»ºè®®ä½¿ç”¨å—æ§ç»„ä»¶ å‡å°‘ä½¿ç”¨ref</li>
</ol>
<h2 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="headerlink" title="é«˜é˜¶å‡½æ•°"></a>é«˜é˜¶å‡½æ•°</h2><ul>
<li>ä¼ å…¥çš„å‚æ•°æ˜¯å‡½æ•°æˆ–è€…è¿”å›çš„æ˜¯å‡½æ•°</li>
<li>å¸¸è§é«˜é˜¶å‡½æ•° promise settimeout arrå‡½æ•°ç­‰</li>
<li>å‡½æ•°æŸ¯é‡ŒåŒ– å‡½æ•°è°ƒç”¨ç»§ç»­è¿”å›çš„å‚æ•° å¤šæ¬¡æ¥æ”¶ æœ€åç»Ÿä¸€å¤„ç†</li>
</ul>
<h2 id="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°"><a href="#ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°" class="headerlink" title="ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°"></a>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°</h2><p>Reactå¸®å¿™è°ƒç”¨ç”Ÿå‘½å‘¨æœŸé’©å­å‡½æ•°<br>ReactDOMå¸è½½ç»„ä»¶æ–¹æ³• ReactDOM.unmountComponentAtNode<br>ç»„ä»¶å¸è½½åä»ç„¶è¿›è¡Œæ“ä½œä¼šæŠ¥é”™</p>
<h2 id="åˆå§‹åŒ–çš„ç”Ÿå‘½å‘¨æœŸ"><a href="#åˆå§‹åŒ–çš„ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="åˆå§‹åŒ–çš„ç”Ÿå‘½å‘¨æœŸ"></a>åˆå§‹åŒ–çš„ç”Ÿå‘½å‘¨æœŸ</h2><p>componentWillmount<br>render<br>componentDidmount<br>componentWillunmount</p>
<h2 id="æ›´æ–°çš„ä¸‰æ¡çº¿è·¯"><a href="#æ›´æ–°çš„ä¸‰æ¡çº¿è·¯" class="headerlink" title="æ›´æ–°çš„ä¸‰æ¡çº¿è·¯"></a>æ›´æ–°çš„ä¸‰æ¡çº¿è·¯</h2><h3 id="ä¸€ã€setState"><a href="#ä¸€ã€setState" class="headerlink" title="ä¸€ã€setState"></a>ä¸€ã€setState</h3><p>setStateä¹‹åå‘ç”Ÿäº†ä»€ä¹ˆäº‹ï¼Ÿ<br>setState<br>shouldComponentUpdateé»˜è®¤è¿”å›true<br>componentWillUpdate<br>render<br>componentDidUpdate</p>
<h3 id="äºŒã€forceUpdate"><a href="#äºŒã€forceUpdate" class="headerlink" title="äºŒã€forceUpdate"></a>äºŒã€forceUpdate</h3><p>forceUpdateæ–¹æ³•çš„ä½œç”¨ï¼Ÿ<br>ä¸æ›´æ”¹stateçš„æ—¶å€™ä¹Ÿæƒ³æ›´æ–°ï¼Œä¸æ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸç›¸æ¯” ä¸éœ€è¦shouldComponentè¿™ä¸ªé˜€é—¨æ§åˆ¶<br>forceUpdate<br>componentWillUpdate<br>render<br>componentDidUpdate</p>
<h3 id="ä¸‰ã€çˆ¶ç»„ä»¶renderæ—¶-å­ç»„ä»¶çš„æ›´æ–°"><a href="#ä¸‰ã€çˆ¶ç»„ä»¶renderæ—¶-å­ç»„ä»¶çš„æ›´æ–°" class="headerlink" title="ä¸‰ã€çˆ¶ç»„ä»¶renderæ—¶ å­ç»„ä»¶çš„æ›´æ–°"></a>ä¸‰ã€çˆ¶ç»„ä»¶renderæ—¶ å­ç»„ä»¶çš„æ›´æ–°</h3><p>componentWillReceiveProps æ³¨æ„æœ‰å‘ æ¥æ”¶åˆ°æ–°çš„propsæ—¶æ‰è°ƒç”¨è¿™ä¸ªé’©å­å‡½æ•°<br>shouldComponentUpdate<br>componentWillUpdate<br>render<br>componentDidUpdate</p>
<h2 id="æ–°ç‰ˆreactä¸æ—§ç‰ˆreactçš„åŒºåˆ«"><a href="#æ–°ç‰ˆreactä¸æ—§ç‰ˆreactçš„åŒºåˆ«" class="headerlink" title="æ–°ç‰ˆreactä¸æ—§ç‰ˆreactçš„åŒºåˆ«"></a>æ–°ç‰ˆreactä¸æ—§ç‰ˆreactçš„åŒºåˆ«</h2><ol>
<li>å³å°†åºŸå¼ƒä¸‰ä¸ªé’©å­ï¼ŒcomponentWillMount componentWillUpdate componentWillReceivePropsåŠ ä¸ŠUnsafeå‰ç¼€</li>
<li>æ–°å¢äº†ä¸¤ä¸ªé’©å­<br> getDerivedStateFromProps éœ€è¦åŠ static å‚æ•°ä¸ºstate props ä½¿ç”¨æ¡ä»¶ä¸ºstateå®Œå…¨ç”±propsçš„å€¼å†³å®š<br> getSnapshotBeforeUpdate åœ¨æ›´æ–°ä¹‹å‰è¿”å›å¿«ç…§å€¼ ä½œä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¼ ç»™ componentWillUpdate</li>
</ol>
<h2 id="Diffç®—æ³•"><a href="#Diffç®—æ³•" class="headerlink" title="Diffç®—æ³•"></a>Diffç®—æ³•</h2><h3 id="Reactä¸­keyçš„ä½œç”¨ï¼Ÿ"><a href="#Reactä¸­keyçš„ä½œç”¨ï¼Ÿ" class="headerlink" title="Reactä¸­keyçš„ä½œç”¨ï¼Ÿ"></a>Reactä¸­keyçš„ä½œç”¨ï¼Ÿ</h3><p>ä½œä¸ºæ ‡è¯† åœ¨æ›´æ–°æ—¶èµ·ä½œç”¨<br>æ–°æ—§è™šæ‹ŸDomå¦‚ä½•æ¯”è¾ƒï¼Ÿ</p>
<ol>
<li>æ•°æ®æ›´æ–°ç”Ÿæˆæ–°çš„è™šæ‹Ÿdom</li>
<li>æ–°çš„è™šæ‹Ÿdomé€šè¿‡keyå€¼ä¸æ—§è™šæ‹Ÿdomå¯¹æ¯”</li>
<li>å¦‚æœkeyå€¼ä¸€æ ·ä¸”å†…å®¹ä¸€æ ·åˆ™å¤ç”¨</li>
<li>å¦‚æœkeyå€¼ä¸€æ ·ä½†å†…å®¹ä¸åŒåˆ™åˆ›å»ºæ–°çš„çœŸå®dom</li>
<li>å¦‚æœkeyå€¼ä¸åŒä¹Ÿåˆ›å»ºæ–°çš„çœŸå®dom</li>
</ol>
<h3 id="ä½¿ç”¨indexå€¼ä½œä¸ºkeyå€¼å­˜åœ¨çš„é—®é¢˜"><a href="#ä½¿ç”¨indexå€¼ä½œä¸ºkeyå€¼å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="ä½¿ç”¨indexå€¼ä½œä¸ºkeyå€¼å­˜åœ¨çš„é—®é¢˜"></a>ä½¿ç”¨indexå€¼ä½œä¸ºkeyå€¼å­˜åœ¨çš„é—®é¢˜</h3><ol>
<li>æ•ˆç‡ä¸é«˜ï¼Œä¾‹å¦‚ä»æ•°ç»„å¤´éƒ¨ï¼ˆé€†é¡ºåºæ·»åŠ ï¼‰æ’å…¥æ•°æ®ï¼Œé‚£ä¹ˆèƒ½å¤ç”¨çš„å°±å¾ˆå°‘</li>
<li>å¦‚æœç»“æ„ä¸­è¿˜åŒ…å«å…¶ä»–ä¾‹å¦‚inputæ ‡ç­¾åˆ™ä¼šå¯¼è‡´ç•Œé¢é”™è¯¯</li>
</ol>
<p>å¦‚ä½•é€‰æ‹©keyï¼ŸğŸˆ¶ï¸idç”¨id å¦‚æœåªæ˜¯åˆ—è¡¨æ¸²æŸ“ç”¨index</p>
<h2 id="Reactè„šæ‰‹æ¶"><a href="#Reactè„šæ‰‹æ¶" class="headerlink" title="Reactè„šæ‰‹æ¶"></a>Reactè„šæ‰‹æ¶</h2><p>æ ·å¼æ¨¡å—åŒ– æ”¹æˆxxx.module.css import xxx from module.css<br>ä»£ç ç‰‡æ®µ reactæ’ä»¶ ES7xxx</p>
<p>uuidç”Ÿæˆå”¯ä¸€æ ‡è¯† ä½†æ˜¯å¤ªå¤§ æ¨èä½¿ç”¨nanoid</p>
<p>react-ajax reactåªå…³æ³¨ç•Œé¢ ä¸åŒ…å«ajaxè¯·æ±‚<br>å¸¸ç”¨ajaxåº“ jqueryï¼ˆå¤ªé‡ï¼‰ axiosè½»é‡</p>
<h2 id="ä»£ç†proxyè§£å†³è·¨åŸŸçš„åŸç†"><a href="#ä»£ç†proxyè§£å†³è·¨åŸŸçš„åŸç†" class="headerlink" title="ä»£ç†proxyè§£å†³è·¨åŸŸçš„åŸç†"></a>ä»£ç†proxyè§£å†³è·¨åŸŸçš„åŸç†</h2><p>ä¾‹å¦‚3000ç«¯å£è¯·æ±‚5000<br>è¯·æ±‚å¯ä»¥æ­£å¸¸å‘é€ ä½†åœ¨è¿”å›ç»“æœçš„æ—¶å€™è¢«åŒæºç­–ç•¥æ‹¦æˆª<br>ä»£ç†ä½œä¸ºä¸­é—´äººä¸å—åŒæºç­–ç•¥çš„é™åˆ¶<br>ç›¸å½“äºæ–°èµ·äº†ä¸€ä¸ª3000ç«¯å£çš„æœåŠ¡ä»£æ›¿å®¢æˆ·ç«¯è¯·æ±‚å’Œè·å–æ•°æ®</p>
<h3 id="Reactè„šæ‰‹æ¶é…ç½®ä»£ç†"><a href="#Reactè„šæ‰‹æ¶é…ç½®ä»£ç†" class="headerlink" title="Reactè„šæ‰‹æ¶é…ç½®ä»£ç†"></a>Reactè„šæ‰‹æ¶é…ç½®ä»£ç†</h3><ol>
<li>package.jsonä¸­çš„proxyå±æ€§ ä½†é…ç½®ä¸äº†å¤šä¸ª</li>
<li>srcæ–‡ä»¶å¤¹ä¸‹æ–°å»ºsetupProxy.jsé…ç½®å…·ä½“è§„åˆ™target changeOrigin pathRewrite èƒ½å¤Ÿé…ç½®å¤šä¸ªä»£ç†</li>
</ol>
<h2 id="pubsubjs-æ¶ˆæ¯è®¢é˜…"><a href="#pubsubjs-æ¶ˆæ¯è®¢é˜…" class="headerlink" title="pubsubjs æ¶ˆæ¯è®¢é˜…"></a>pubsubjs æ¶ˆæ¯è®¢é˜…</h2><p>å‘é€ajaxçš„æ–¹å¼ jqueryå’Œaxioséƒ½åŸºäºxhrå°è£…</p>
<ol>
<li>xhr</li>
<li>jquery å›è°ƒåœ°ç‹±</li>
<li>axios promiseé£æ ¼</li>
<li>fetch ä¸xhrå¹¶åˆ— æµè§ˆå™¨è‡ªå¸¦ </li>
</ol>
<h2 id="SPAå•åº”ç”¨çš„ç†è§£"><a href="#SPAå•åº”ç”¨çš„ç†è§£" class="headerlink" title="SPAå•åº”ç”¨çš„ç†è§£"></a>SPAå•åº”ç”¨çš„ç†è§£</h2><p>å•é¡µé¢å¤šç»„ä»¶</p>
<ol>
<li>æ•´ä¸ªåº”ç”¨åªæœ‰ä¸€ä¸ªé¡µé¢</li>
<li>ç‚¹å‡»é¡µé¢ä¸åˆ·æ–° è€Œæ˜¯å±€éƒ¨åˆ·æ–° </li>
<li>æ•°æ®é€šè¿‡ajaxè¯·æ±‚</li>
</ol>
<h2 id="è·¯ç”±çš„ç†è§£"><a href="#è·¯ç”±çš„ç†è§£" class="headerlink" title="è·¯ç”±çš„ç†è§£"></a>è·¯ç”±çš„ç†è§£</h2><p>è·¯ç”±å°±æ˜¯æ˜ å°„å…³ç³» keyä¸ºè·¯å¾„ valueä¸ºcomponentæˆ–è€…å‡½æ•°</p>
<h3 id="è·¯ç”±åˆ†ç±»"><a href="#è·¯ç”±åˆ†ç±»" class="headerlink" title="è·¯ç”±åˆ†ç±»"></a>è·¯ç”±åˆ†ç±»</h3><ol>
<li>åç«¯è·¯ç”± valueå°±æ˜¯å‡½æ•° app.get</li>
<li>å‰ç«¯è·¯ç”± ä¾‹å¦‚pathå˜ä¸º/test å°±ä½¿ç”¨Testç»„ä»¶</li>
</ol>
<h3 id="å‰ç«¯è·¯ç”±æ˜¯å¦‚ä½•ç›‘æµ‹çš„ï¼Ÿ"><a href="#å‰ç«¯è·¯ç”±æ˜¯å¦‚ä½•ç›‘æµ‹çš„ï¼Ÿ" class="headerlink" title="å‰ç«¯è·¯ç”±æ˜¯å¦‚ä½•ç›‘æµ‹çš„ï¼Ÿ"></a>å‰ç«¯è·¯ç”±æ˜¯å¦‚ä½•ç›‘æµ‹çš„ï¼Ÿ</h3><p>æµè§ˆå™¨çš„history åŸç”Ÿä¸å¥½æ“ä½œ å€ŸåŠ©history.jsåº“</p>
<p>h5çš„historyæˆ–è€…é”šç‚¹è·³è½¬<br>åŸç”Ÿhtmlé aæ ‡ç­¾è·³è½¬é¡µé¢ reacté è·¯ç”±é“¾æ¥å®ç°åˆ‡æ¢ç»„ä»¶</p>
<h2 id="BrowserRouter-ä¸-HashRouter"><a href="#BrowserRouter-ä¸-HashRouter" class="headerlink" title="BrowserRouter ä¸ HashRouter"></a>BrowserRouter ä¸ HashRouter</h2><h3 id="BrowserRouter-å¯»æ‰¾ç›®å½•ä¸‹çš„æ–‡ä»¶"><a href="#BrowserRouter-å¯»æ‰¾ç›®å½•ä¸‹çš„æ–‡ä»¶" class="headerlink" title="BrowserRouter å¯»æ‰¾ç›®å½•ä¸‹çš„æ–‡ä»¶"></a>BrowserRouter å¯»æ‰¾ç›®å½•ä¸‹çš„æ–‡ä»¶</h3><h3 id="HashRouter-æ ¹æ®å“ˆå¸Œå€¼åŒ¹é…"><a href="#HashRouter-æ ¹æ®å“ˆå¸Œå€¼åŒ¹é…" class="headerlink" title="HashRouter æ ¹æ®å“ˆå¸Œå€¼åŒ¹é…"></a>HashRouter æ ¹æ®å“ˆå¸Œå€¼åŒ¹é…</h3><p>è·¯ç”±ç»„ä»¶ è·¯ç”±åŒ¹é…åå±•ç¤ºçš„ç»„ä»¶ ä¼šæ”¶åˆ°è·¯ç”±å™¨ä¼ é€’çš„props ï¼ˆhistory location matchï¼‰<br>ä¸€èˆ¬ç»„ä»¶</p>
<h2 id="redux"><a href="#redux" class="headerlink" title="redux"></a>redux</h2><p>redux ä¸“é—¨ç”¨äºçŠ¶æ€ç®¡ç† ä¸æ˜¯reactæ’ä»¶ reacr-reduxæ‰æ˜¯reactå®˜æ–¹çš„çŠ¶æ€ç®¡ç†</p>
<h2 id="reduxå·¥ä½œæµç¨‹å’Œä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ"><a href="#reduxå·¥ä½œæµç¨‹å’Œä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="reduxå·¥ä½œæµç¨‹å’Œä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ"></a>reduxå·¥ä½œæµç¨‹å’Œä¸‰ä¸ªæ ¸å¿ƒæ¦‚å¿µ</h2><ol>
<li>action objectå¯¹è±¡typeå’Œdata</li>
<li>reduceræ¥æ”¶æ—§stateå’Œaction è¿”å›æ–°state æœ¬è´¨çº¯å‡½æ•°</li>
<li>store è°ƒåº¦æŠŠactionç»™reducer</li>
</ol>
<h2 id="React-ç»„ä»¶å­˜åœ¨çš„é—®é¢˜"><a href="#React-ç»„ä»¶å­˜åœ¨çš„é—®é¢˜" class="headerlink" title="React ç»„ä»¶å­˜åœ¨çš„é—®é¢˜"></a>React ç»„ä»¶å­˜åœ¨çš„é—®é¢˜</h2><ol>
<li>ä¸»è¦è°ƒç”¨setStateå°±ä¼šè§¦å‘renderæ€§èƒ½ä¸å¥½ è§£å†³ï¼šä½¿ç”¨ PureComponent æˆ–è€…åœ¨ shouldComponentUpdate ä¸­è¿›è¡Œåˆ¤æ–­</li>
</ol>
<h2 id="ç»„ä»¶é—´çš„é€šä¿¡æ–¹å¼"><a href="#ç»„ä»¶é—´çš„é€šä¿¡æ–¹å¼" class="headerlink" title="ç»„ä»¶é—´çš„é€šä¿¡æ–¹å¼"></a>ç»„ä»¶é—´çš„é€šä¿¡æ–¹å¼</h2><ol>
<li>props</li>
<li>æ¶ˆæ¯è®¢é˜…-å‘å¸ƒ pubs-sub event ç­‰ç­‰</li>
<li>çŠ¶æ€ç®¡ç† redux dva</li>
<li>conText Provider Consumer</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2022/01/11/Form%E8%A1%A8%E5%8D%95%E5%8E%9F%E7%90%86/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2022/01/11/Form%E8%A1%A8%E5%8D%95%E5%8E%9F%E7%90%86/" class="post-title-link" itemprop="url">Formè¡¨å•åŸç†</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-01-11 10:11:50" itemprop="dateCreated datePublished" datetime="2022-01-11T10:11:50+08:00">2022-01-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2022-01-16 22:05:26" itemprop="dateModified" datetime="2022-01-16T22:05:26+08:00">2022-01-16</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Formçš„ä½¿ç”¨ä¾‹å­"><a href="#Formçš„ä½¿ç”¨ä¾‹å­" class="headerlink" title="Formçš„ä½¿ç”¨ä¾‹å­"></a>Formçš„ä½¿ç”¨ä¾‹å­</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">export default function FieldForm(props) &#123;</span><br><span class="line">	const [form] = useForm()</span><br><span class="line">	useEffect(() =&gt; &#123;</span><br><span class="line">   		form.setFieldsValue(&#123;username: &#x27;lion&#x27;&#125;)</span><br><span class="line"> 		&#125;, [])</span><br><span class="line">	return &lt;Form form=&#123;form&#125;&gt;</span><br><span class="line">		&lt;Field name=&quot;userName&quot;&gt;&lt;Input/&gt;&lt;/Field&gt;</span><br><span class="line">		&lt;Field name=&quot;age&quot;&gt;&lt;Input/&gt;&lt;/Field&gt;</span><br><span class="line">	 &lt;/Form&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="useForm-tsx"><a href="#useForm-tsx" class="headerlink" title="useForm.tsx"></a>useForm.tsx</h2><p>é€šè¿‡ Form.useForm() è·å– formInstance  å®ä¾‹<br>formInstance æä¾›äº† getFieldValueã€setFieldsValue ç­‰æ–¹æ³•<br>é€šè¿‡ context å…±äº« formInstance</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">export default function useForm(form)&#123;</span><br><span class="line">	const formRef = useRef(null)</span><br><span class="line">	if(!formRef.current)&#123;</span><br><span class="line">		if(form)&#123;</span><br><span class="line">			formRef.current = form</span><br><span class="line">		&#125;else&#123;</span><br><span class="line">			const formStore = new FormStore()</span><br><span class="line">			formRef.current = formStore.getForm()</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return [formRef.current]</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="FormStore"><a href="#FormStore" class="headerlink" title="FormStore"></a>FormStore</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class FormStore&#123;</span><br><span class="line">	// æä¾›FormStoreå®ä¾‹æ–¹æ³•</span><br><span class="line">	getForm = () =&gt; (&#123;</span><br><span class="line">		getFieldValue: this.getFieldValue,</span><br><span class="line">		getFieldsValue: this.getFieldsValue,</span><br><span class="line">		setFieldsValue: this.setFieldsValue,</span><br><span class="line">		registerField: this.registerField,</span><br><span class="line">		submit: this.submit</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="FieldContext"><a href="#FieldContext" class="headerlink" title="FieldContext"></a>FieldContext</h2><p>è®©å…¨å±€å…±äº« formInstance</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// åˆ›å»ºcontext</span><br><span class="line">const Context = createContext(&#123;</span><br><span class="line">	...,</span><br><span class="line">	getFieldValue:&#123;&#125;</span><br><span class="line">&#125;)</span><br><span class="line">// Form.tsx ä¸­ä½¿ç”¨</span><br><span class="line">const [formInstance] = useForm(form)</span><br><span class="line">&lt;form&gt;</span><br><span class="line">	&lt;FieldContext.Provider value=&#123;formInstance&#125;&gt;&#123;children&#125;&lt;/FieldContext.Provider&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<h2 id="Field"><a href="#Field" class="headerlink" title="Field"></a>Field</h2><p>æ‹¦æˆªå­å…ƒç´ ï¼Œä½¿ç”¨ React.cloneElement æ–¹æ³•æ·»åŠ  valueã€onChangeå±æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// ç›¸å½“äºç»™ Input ç­‰ç»„ä»¶æ·»åŠ  valueã€onChange çš„ props</span><br><span class="line">getControlled()&#123;</span><br><span class="line">	return &#123;</span><br><span class="line">		value:</span><br><span class="line">		onChange</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">render()&#123;</span><br><span class="line">	const &#123;children&#125; = this.props</span><br><span class="line">	return  &lt;div&gt;&#123;cloneElement(children,this.getControlled())&#125;&lt;/div&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/17/JavaScript%E7%B2%BE%E7%B2%B9/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/17/JavaScript%E7%B2%BE%E7%B2%B9/" class="post-title-link" itemprop="url">JavaScriptç²¾ç²¹</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-17 10:36:41" itemprop="dateCreated datePublished" datetime="2021-12-17T10:36:41+08:00">2021-12-17</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-12-20 09:29:10" itemprop="dateModified" datetime="2021-12-20T09:29:10+08:00">2021-12-20</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ç¬¬ä¸‰ç« -å¯¹è±¡"><a href="#ç¬¬ä¸‰ç« -å¯¹è±¡" class="headerlink" title="ç¬¬ä¸‰ç«  å¯¹è±¡"></a>ç¬¬ä¸‰ç«  å¯¹è±¡</h1><h2 id="å¯¹è±¡å­—é¢é‡"><a href="#å¯¹è±¡å­—é¢é‡" class="headerlink" title="å¯¹è±¡å­—é¢é‡"></a>å¯¹è±¡å­—é¢é‡</h2><p>ä¸€ä¸ªå¯¹è±¡å­—é¢é‡å°±æ˜¯åŒ…å«åœ¨èŠ±æ‹¬å·ä¸­çš„å¤šä¸ªé”®å€¼å¯¹ï¼Œå¦‚æœå±æ€§åæ˜¯åˆæ³•çš„ï¼Œä¸å¼ºåˆ¶ä½¿ç”¨â€â€åŒ…è£¹ï¼Œå¦‚æœæ˜¯éåˆæ³•çš„ï¼Œåˆ™å¿…é¡»ç”¨â€â€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">const person = &#123;</span><br><span class="line">	name: &#x27;wansui&#x27;,</span><br><span class="line">	age: 1,</span><br><span class="line">	&quot;first-name&quot;: &#x27;huahua&#x27;,</span><br><span class="line">	firt_name: &quot;fafa&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ£€ç´¢"><a href="#æ£€ç´¢" class="headerlink" title="æ£€ç´¢"></a>æ£€ç´¢</h2><p>å¯ä»¥ä½¿ç”¨ . æˆ–è€… [] çš„æ–¹æ³•ä»å¯¹è±¡ä¸­å–å€¼ </p>
<h2 id="æ›´æ–°"><a href="#æ›´æ–°" class="headerlink" title="æ›´æ–°"></a>æ›´æ–°</h2><p>å¦‚æœå±æ€§åå·²å­˜åœ¨åˆ™æ›´æ–°ï¼Œä¸å­˜åœ¨åˆ™è¢«æ‰©å……åˆ°å¯¹è±¡ä¸­</p>
<h2 id="å¼•ç”¨"><a href="#å¼•ç”¨" class="headerlink" title="å¼•ç”¨"></a>å¼•ç”¨</h2><p>å¯¹è±¡é€šè¿‡å¼•ç”¨æ¥ä¼ é€’ï¼Œä¸ä¼šè¢«å¤åˆ¶</p>
<h2 id="åŸå‹"><a href="#åŸå‹" class="headerlink" title="åŸå‹"></a>åŸå‹</h2><p>æ¯ä¸ªå¯¹è±¡éƒ½è¿æ¥åˆ°ä¸€ä¸ªåœ†å½¢å¯¹è±¡ï¼Œé€šè¿‡å­—é¢é‡åˆ›å»ºçš„å¯¹è±¡è¿æ¥åˆ° Object.prototype<br>åŸå‹è¿æ¥åªæœ‰åœ¨æ£€ç´¢å€¼çš„æ—¶å€™æ‰ä¼šç”¨åˆ°ï¼Œå¦‚æœå¯¹è±¡ä¸­ä¸å­˜åœ¨æŸä¸ªå±æ€§ï¼Œåˆ™åˆ°åŸå‹å¯¹è±¡ä¸­å»å¯»æ‰¾è¿™ä¸ªå±æ€§</p>
<h2 id="åå°„"><a href="#åå°„" class="headerlink" title="åå°„"></a>åå°„</h2><p>æ£€æŸ¥å¯¹è±¡æ˜¯å¦å…·æœ‰æŸç§å±æ€§</p>
<ol>
<li>ä½¿ç”¨ typeof åˆ¤æ–­å¯¹è±¡çš„ç±»å‹</li>
<li>ä½¿ç”¨ hasOwnProperty æ–¹æ³•</li>
</ol>
<h2 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h2><p>ä½¿ç”¨ for in å¯éå†å¯¹è±¡ä¸­çš„å±æ€§ï¼Œç¼ºç‚¹æ˜¯ä¸ä¼šæŒ‰ç…§é¡ºåºéå†<br>å¦‚æœæƒ³è¦æŒ‰ç…§é¡ºåºéå†ï¼Œå»ºè®®ä½¿ç”¨ for å¾ªç¯</p>
<h2 id="åˆ é™¤"><a href="#åˆ é™¤" class="headerlink" title="åˆ é™¤"></a>åˆ é™¤</h2><p>ä½¿ç”¨ delete åˆ é™¤å¯¹è±¡ä¸­çš„å±æ€§ï¼Œè¿™ç§åˆ é™¤ä¸ä¼šåˆ é™¤æ‰åŸå‹å¯¹è±¡ä¸­çš„å±æ€§</p>
<h1 id="ç¬¬å››ç« -å‡½æ•°"><a href="#ç¬¬å››ç« -å‡½æ•°" class="headerlink" title="ç¬¬å››ç«  å‡½æ•°"></a>ç¬¬å››ç«  å‡½æ•°</h1><h2 id="å‡½æ•°å¯¹è±¡"><a href="#å‡½æ•°å¯¹è±¡" class="headerlink" title="å‡½æ•°å¯¹è±¡"></a>å‡½æ•°å¯¹è±¡</h2><p>å‡½æ•°å¯¹è±¡è¿æ¥åˆ°çš„åŸå‹æ˜¯ Function.prototype ï¼Œå‡½æ•°çš„ä¸ä¼—ä¸åŒåœ¨äºèƒ½è¢«è°ƒç”¨</p>
<h2 id="å‡½æ•°å­—é¢é‡"><a href="#å‡½æ•°å­—é¢é‡" class="headerlink" title="å‡½æ•°å­—é¢é‡"></a>å‡½æ•°å­—é¢é‡</h2><p>å‡½æ•°å­—é¢é‡åŒ…æ‹¬å››ä¸ªéƒ¨åˆ†</p>
<ol>
<li>function ä¿ç•™å­—</li>
<li>å‡½æ•°åç§°ï¼Œè¢«çœç•¥çš„å°±æ˜¯åŒ¿åå‡½æ•°</li>
<li>å‡½æ•°å…¥å‚ a å’Œ b</li>
<li>å‡½æ•°ä¸»ä½“<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const add = function (a, b)&#123;</span><br><span class="line">	return a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="å‡½æ•°è°ƒç”¨"><a href="#å‡½æ•°è°ƒç”¨" class="headerlink" title="å‡½æ•°è°ƒç”¨"></a>å‡½æ•°è°ƒç”¨</h2><p>åœ¨è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œé™¤äº†å£°æ˜æ—¶å®šä¹‰çš„å½¢å‚ï¼Œæ¯ä¸ªå‡½æ•°è¿˜æ¥å—ä¸¤ä¸ªé™„åŠ å‚æ•° this å’Œ argumentsï¼Œå‚æ•° this çš„å€¼å–å†³äºè°ƒç”¨æ¨¡å¼<br>è°ƒç”¨è¿ç®—ç¬¦æ˜¯è·Ÿåœ¨å‡½æ•°å€¼è¡¨è¾¾å¼åé¢çš„åœ†æ‹¬å·ï¼Œåœ†æ‹¬å·å†…åŒ…å«0ä¸ªæˆ–è€…å¤šä¸ªè¡¨è¾¾å¼ï¼Œç”¨é€—å·éš”å¼€</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function test(name)&#123;</span><br><span class="line">	console.log(name)</span><br><span class="line">&#125;</span><br><span class="line">test(1+&#x27;hahah&#x27;) // 1hahah</span><br></pre></td></tr></table></figure>
<h3 id="æ–¹æ³•è°ƒç”¨æ¨¡å¼"><a href="#æ–¹æ³•è°ƒç”¨æ¨¡å¼" class="headerlink" title="æ–¹æ³•è°ƒç”¨æ¨¡å¼"></a>æ–¹æ³•è°ƒç”¨æ¨¡å¼</h3><p>å½“ä¸€ä¸ªå‡½æ•°è¢«ä¿å­˜ä¸ºä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œç§°ä¹‹ä¸ºæ–¹æ³•ï¼Œæ­¤æ—¶çš„ this æŒ‡å‘å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const obj = &#123;</span><br><span class="line">	value:0,</span><br><span class="line">	increment: function()&#123;</span><br><span class="line">		this.value++</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.increment() //obj.valueä¸º1</span><br></pre></td></tr></table></figure>
<h3 id="å‡½æ•°è°ƒç”¨æ¨¡å¼"><a href="#å‡½æ•°è°ƒç”¨æ¨¡å¼" class="headerlink" title="å‡½æ•°è°ƒç”¨æ¨¡å¼"></a>å‡½æ•°è°ƒç”¨æ¨¡å¼</h3><p>å½“ä¸€ä¸ªå‡½æ•°å¹¶éä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œæ˜¯è¢«å½“åšä¸€ä¸ªå‡½æ•°æ¥è°ƒç”¨ï¼Œæ­¤æ—¶ this ç»‘å®šåˆ°å…¨å±€å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">const obj = &#123;</span><br><span class="line">	value: 0,</span><br><span class="line">	increment: function()&#123;</span><br><span class="line">		const help = function()&#123;</span><br><span class="line">			this.value++</span><br><span class="line">		&#125;</span><br><span class="line">		help()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.increment()//æ­¤æ—¶çš„obj.valueä»ç„¶ä¸º0</span><br><span class="line"></span><br><span class="line">//è§£å†³æ–¹æ³•</span><br><span class="line">const obj = &#123;</span><br><span class="line">	value: 0,</span><br><span class="line">	increment: function()&#123;</span><br><span class="line">		const that = this // è·å–objå¯¹è±¡</span><br><span class="line">		const help = function()&#123;</span><br><span class="line">			that.value++</span><br><span class="line">		&#125;</span><br><span class="line">		help()</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">obj.increment()//æ­¤æ—¶çš„obj.valueä¸º1</span><br></pre></td></tr></table></figure>
<h3 id="æ„é€ å™¨è°ƒç”¨æ¨¡å¼"><a href="#æ„é€ å™¨è°ƒç”¨æ¨¡å¼" class="headerlink" title="æ„é€ å™¨è°ƒç”¨æ¨¡å¼"></a>æ„é€ å™¨è°ƒç”¨æ¨¡å¼</h3><p>ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœåˆ›å»ºçš„ç›®çš„å°±æ˜¯å¸Œæœ›ç»“åˆ new å‰ç¼€æ¥è°ƒç”¨ï¼Œç§°ä¹‹ä¸ºæ„é€ å‡½æ•°<br>å¦‚æœä¸€ä¸ªå‡½æ•°å‰é¢å¸¦ä¸Š new æ¥è°ƒç”¨ï¼Œé‚£ä¹ˆèƒŒåœ°é‡Œå°±ä¼šè¿æ¥åˆ°è¯¥å‡½æ•°çš„prototype</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const Person = function(name)&#123;</span><br><span class="line">	this.name = name</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.getName = function()&#123;</span><br><span class="line">	return this.name</span><br><span class="line">&#125;</span><br><span class="line">const p = new Person(&quot;wansui&quot;)</span><br><span class="line">p.getName() //wansui</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="applyè°ƒç”¨æ¨¡å¼"><a href="#applyè°ƒç”¨æ¨¡å¼" class="headerlink" title="applyè°ƒç”¨æ¨¡å¼"></a>applyè°ƒç”¨æ¨¡å¼</h3><p>apply æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ this å€¼ï¼Œå¦ä¸€ä¸ªæ˜¯å‚æ•°æ•°ç»„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Person.prototype.getName.apply(&#123;name:&quot;hahhah&quot;&#125;) //hahhah</span><br></pre></td></tr></table></figure>
<h2 id="arguments"><a href="#arguments" class="headerlink" title="arguments"></a>arguments</h2><p>å‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šå¾—åˆ°ä¸€ä¸ª arguments ç±»æ•°ç»„ï¼Œè¿™ä¸ªç±»æ•°ç»„é‡Œé¢å…·æœ‰å‚æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function sum()&#123;</span><br><span class="line">	let sum = 0</span><br><span class="line">	for(let i = 0;i &lt; arguments.length; i++)&#123;</span><br><span class="line">		sum += arguments[i]</span><br><span class="line">	&#125;</span><br><span class="line">	return sum</span><br><span class="line">&#125;</span><br><span class="line">sum(1,2,3) //6</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="è¿”å›"><a href="#è¿”å›" class="headerlink" title="è¿”å›"></a>è¿”å›</h2><p>ä¸€ä¸ªå‡½æ•°æ€»ä¼šæœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œå¦‚æœæ²¡æœ‰è¿”å›å€¼ï¼Œåˆ™è¿”å› undefined<br>å¦‚æœå‡½æ•°è°ƒç”¨å‰é¢åŠ ä¸Šäº† new å‰ç¼€ï¼Œé‚£ä¹ˆè¿”å›å€¼ä¸ºæ–°åˆ›å»ºçš„å¯¹è±¡</p>
<h2 id="å¼‚å¸¸"><a href="#å¼‚å¸¸" class="headerlink" title="å¼‚å¸¸"></a>å¼‚å¸¸</h2><p>ä½¿ç”¨ try catch æ•æ‰ throw æŠ›å‡ºçš„é”™è¯¯</p>
<h2 id="æ‰©å……ç±»å‹çš„åŠŸèƒ½"><a href="#æ‰©å……ç±»å‹çš„åŠŸèƒ½" class="headerlink" title="æ‰©å……ç±»å‹çš„åŠŸèƒ½"></a>æ‰©å……ç±»å‹çš„åŠŸèƒ½</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Function.prototype.method = function(name, func)&#123;</span><br><span class="line">	if(!this.prototype[name])&#123;</span><br><span class="line">		this.prototype[name] = func</span><br><span class="line">	&#125;</span><br><span class="line">	return this</span><br><span class="line">&#125;</span><br><span class="line">Number.method(&#x27;integer&#x27;,function()&#123;&#125;)</span><br><span class="line">String.method(&#x27;trim&#x27;,function()&#123;&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h2><p>é€’å½’å‡½æ•°å°±æ˜¯ä¼šç›´æ¥æˆ–è€…é—´æ¥è°ƒç”¨è‡ªèº«çš„ä¸€ç§å‡½æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">//æ±‰è¯ºå¡”é€’å½’ å¦‚ä½•ç†è§£æ±‰è¯ºå¡”é€’å½’ï¼šhttps://www.zhihu.com/question/24385418</span><br><span class="line">function hanoi(disc, src, aux, dst)&#123;</span><br><span class="line">	//srcå½“å‰æŸ±ã€auxä¸­è½¬æŸ±ã€dstç›®æ ‡æŸ±å­</span><br><span class="line">	if(disc&gt;0)&#123;</span><br><span class="line">		hanoi(disc - 1,src, dst, aux) // æŠŠé™¤äº†åº•åº§çš„å…¶ä»–åœ†ç›˜ä»åŸå§‹æŸ±ç§»åŠ¨åˆ°ä¸­è½¬æŸ±</span><br><span class="line">		console.log(&#x27;Move disc&#x27; + disc + &#x27;from&#x27; + src + &#x27;to&#x27; + dst )</span><br><span class="line">		hanoi(disc - 1,aux, src, dst) // æŠŠé™¤äº†åº•åº§çš„å…¶ä»–åœ†ç›˜ä»ä¸­ä¸“æ³¨ç§»åŠ¨åˆ°ç›®æ ‡æŸ±</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">hanoi(3, &#x27;A&#x27;, &#x27;B&#x27;, &#x27;C&#x27;)</span><br><span class="line">&lt;!--</span><br><span class="line">	æœ‰ä¸€ä¸ªåœ†ç›˜ï¼Œä»Aç§»åŠ¨åˆ°C hanoi(1,&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;)</span><br><span class="line"></span><br><span class="line">	æœ‰ä¸¤ä¸ªåœ†ç›˜</span><br><span class="line">		å°åœ†ç›˜ä» A ç§»åŠ¨åˆ° B hanoi(1,&#x27;A&#x27;,&#x27;C&#x27;,&#x27;B&#x27;)</span><br><span class="line">		å¤§åœ†ç›˜ä» A ç§»åŠ¨åˆ° C hanoi(1,&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;)</span><br><span class="line">		å°åœ†ç›˜ä» B ç§»åŠ¨åˆ° C hanoi(1,&#x27;B&#x27;,&#x27;A&#x27;,&#x27;C&#x27;)</span><br><span class="line"></span><br><span class="line">	æœ‰ä¸‰ä¸ªåœ†ç›˜</span><br><span class="line">		hanoi(1,&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;)</span><br><span class="line">		hanoi(1,&#x27;A&#x27;,&#x27;C&#x27;,&#x27;B&#x27;)</span><br><span class="line">		hanoi(1,&#x27;C&#x27;,&#x27;A&#x27;,&#x27;B&#x27;)</span><br><span class="line">		hanoi(1,&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;)</span><br><span class="line">		hanoi(1,&#x27;B&#x27;,&#x27;C&#x27;,&#x27;A&#x27;)</span><br><span class="line">		hanoi(1,&#x27;B&#x27;,&#x27;A&#x27;,&#x27;C&#x27;)</span><br><span class="line">		hanoi(1,&#x27;A&#x27;,&#x27;B&#x27;,&#x27;C&#x27;)</span><br><span class="line">	ä¸‰ä¸ªåœ†ç›˜çš„ç§»åŠ¨æƒ…å†µç›¸å½“äº</span><br><span class="line">		å…ˆæŠŠé™¤äº†åº•åº§çš„ä¸¤ä¸ªå°åœ†ç›˜ä» A ç§»åŠ¨åˆ° B hanoi(2,&#x27;A&#x27;,&#x27;C&#x27;,&#x27;B&#x27;)</span><br><span class="line">		å†æŠŠåœ†ç›˜ä» B ç§»åŠ¨åˆ° C  hanoi(2,&#x27;B&#x27;,&#x27;A&#x27;,&#x27;C&#x27;)</span><br><span class="line"></span><br><span class="line"> --&gt;</span><br></pre></td></tr></table></figure>
<h3 id="ä»€ä¹ˆæ˜¯å°¾é€’å½’è°ƒç”¨ï¼Ÿ"><a href="#ä»€ä¹ˆæ˜¯å°¾é€’å½’è°ƒç”¨ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ˜¯å°¾é€’å½’è°ƒç”¨ï¼Ÿ"></a>ä»€ä¹ˆæ˜¯å°¾é€’å½’è°ƒç”¨ï¼Ÿ</h3><p>å‡½æ•°è°ƒç”¨è‡ªèº«æˆä¸ºé€’å½’ï¼Œå¦‚æœä¸€ä¸ªå‡½æ•°è¿”å›è‡ªèº«é€’å½’è°ƒç”¨çš„ç»“æœå°±æ˜¯å°¾é€’å½’</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//é€’å½’å®ç°é˜¶ä¹˜å‡½æ•°</span><br><span class="line">function factorial(n) &#123;</span><br><span class="line">  if (n === 1) return 1;</span><br><span class="line">  return n * factorial(n - 1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å°¾é€’å½’å®ç°é˜¶ä¹˜å‡½æ•°</span><br><span class="line">function factorial(n, total) &#123;</span><br><span class="line">  if (n === 1) return total;</span><br><span class="line">  return factorial(n - 1, n * total);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä½œç”¨åŸŸ"><a href="#ä½œç”¨åŸŸ" class="headerlink" title="ä½œç”¨åŸŸ"></a>ä½œç”¨åŸŸ</h2><p>JavaScriptæ˜¯å‡½æ•°ä½œç”¨åŸŸï¼Œæ„å‘³ç€å®šä¹‰åœ¨å‡½æ•°ä¸­çš„å‚æ•°å’Œå˜é‡åœ¨å‡½æ•°å¤–éƒ¨æ˜¯ä¸å¯è§çš„</p>
<h2 id="é—­åŒ…"><a href="#é—­åŒ…" class="headerlink" title="é—­åŒ…"></a>é—­åŒ…</h2><p>å†…éƒ¨å‡½æ•°æ¯”å¤–éƒ¨å‡½æ•°æ‹¥æœ‰æ›´é•¿çš„ç”Ÿå‘½å‘¨æœŸ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">const obj = (function()&#123;</span><br><span class="line">		let value = 1</span><br><span class="line">		return &#123;</span><br><span class="line">			increment:function()&#123;</span><br><span class="line">				value++</span><br><span class="line">			&#125;,</span><br><span class="line">			getValue:function()&#123;</span><br><span class="line">				return value</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">&#125;)()</span><br><span class="line">obj.increment()</span><br><span class="line">obj.getValue()//è¾“å‡º2</span><br></pre></td></tr></table></figure>
<h2 id="æ¨¡å—"><a href="#æ¨¡å—" class="headerlink" title="æ¨¡å—"></a>æ¨¡å—</h2><p>ä½¿ç”¨å‡½æ•°å’Œé—­åŒ…æ„é€ æ¨¡å—ï¼Œæ¨¡å—æ¨¡å¼çš„å½¢å¼æ˜¯</p>
<ol>
<li>å®šä¹‰äº†ç§æœ‰å˜é‡å’Œå‡½æ•°çš„å‡½æ•°</li>
<li>åˆ©ç”¨é—­åŒ…å¯ä»¥è®¿é—®ç§æœ‰å˜é‡å’Œç‰¹æƒå‡½æ•°çš„ç‰¹æ€§</li>
<li>å°†ç‰¹æƒå‡½æ•°è¿”å›ï¼Œæˆ–è€…æ˜¯ä¿å­˜<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//ç”Ÿæˆåºåˆ—å·</span><br><span class="line">const serial_maker = function()&#123;</span><br><span class="line">	let prefix = &#x27;&#x27;</span><br><span class="line">	let seq = 0</span><br><span class="line">	return&#123;</span><br><span class="line">		set_prefix:function(p)&#123;</span><br><span class="line">			prefix = p</span><br><span class="line">		&#125;,</span><br><span class="line">		set_seq:function(s)&#123;</span><br><span class="line">			seq = s</span><br><span class="line">		&#125;,</span><br><span class="line">		gensym:function()&#123;</span><br><span class="line">			return prefix + seq</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//makeråªèƒ½é€šè¿‡ set_prefix å’Œ set_seq æ–¹æ³•ä¿®æ”¹ prefix å’Œ seqçš„å€¼</span><br><span class="line">const maker = serial_maker()</span><br><span class="line">maker.set_prefix(&#x27;K&#x27;)</span><br><span class="line">maker.set_seq(0)</span><br><span class="line">maker.gensym()//K0</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="çº§è”"><a href="#çº§è”" class="headerlink" title="çº§è”"></a>çº§è”</h2><p>ç»™ä¸€äº›è®¾ç½®æˆ–è€…ä¿®æ”¹å¯¹è±¡çš„æŸä¸ªçŠ¶æ€å´æ²¡æœ‰è¿”å›å€¼çš„æ–¹æ³•è¿”å›thisï¼Œå®ç°çº§è”</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//ä¾‹å¦‚</span><br><span class="line">getElement(&#x27;box&#x27;)</span><br><span class="line">	.move()</span><br><span class="line">	.height()</span><br><span class="line">	.color()</span><br></pre></td></tr></table></figure>
<h2 id="å‡½æ•°æŸ¯é‡ŒåŒ–"><a href="#å‡½æ•°æŸ¯é‡ŒåŒ–" class="headerlink" title="å‡½æ•°æŸ¯é‡ŒåŒ–"></a>å‡½æ•°æŸ¯é‡ŒåŒ–</h2><p>å°±æ˜¯æŠŠå‡½æ•°çš„å¤šä¸ªå‚æ•°è½¬æ¢ä¸ºå¤šä¸ªå•ä¸€å‚æ•°çš„å‡½æ•°è°ƒç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">function add(x, y)&#123;</span><br><span class="line">	return x + y</span><br><span class="line">&#125;</span><br><span class="line">function curryAdd(x)&#123;</span><br><span class="line">	return function(y)&#123;</span><br><span class="line">		return x + y</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">const add1 = curryAdd(1)</span><br><span class="line">add1(6) //7</span><br><span class="line"></span><br><span class="line">function curryingCheck(reg) &#123;</span><br><span class="line">    return function(txt) &#123;</span><br><span class="line">        return reg.test(txt)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const hasNumber = curryingCheck(/\d+/g)</span><br><span class="line">const hasLetter = curryingCheck(/[a-z]+/g)</span><br><span class="line"></span><br><span class="line">hasNumber(333)</span><br><span class="line">hasLetter(&#x27;kasjkasn&#x27;)</span><br></pre></td></tr></table></figure>
<h2 id="è®°å¿†"><a href="#è®°å¿†" class="headerlink" title="è®°å¿†"></a>è®°å¿†</h2><p>å‡½æ•°å¯ä»¥å°†ä¹‹å‰çš„ç»“æœå­˜åœ¨ memo æ•°ç»„ä¸­ï¼Œå‡å°‘ä¸å¿…è¦çš„è¿ç®—</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">const fibonacci = (function()&#123;</span><br><span class="line">	const memo = [0,1]</span><br><span class="line">	const fib = function(n)&#123;</span><br><span class="line">		let result = memo[n]</span><br><span class="line">		if(typeof result !== &#x27;number&#x27;)&#123;</span><br><span class="line">			result = fib(n-1) + fib(n-2)</span><br><span class="line">			memo[n] = result</span><br><span class="line">		&#125;</span><br><span class="line">		return result</span><br><span class="line">	&#125;</span><br><span class="line">	return fib</span><br><span class="line">&#125;)()</span><br><span class="line">fibonacci(4) //3 </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬äº”ç« -ç»§æ‰¿"><a href="#ç¬¬äº”ç« -ç»§æ‰¿" class="headerlink" title="ç¬¬äº”ç«  ç»§æ‰¿"></a>ç¬¬äº”ç«  ç»§æ‰¿</h2><h3 id="åŸå‹-1"><a href="#åŸå‹-1" class="headerlink" title="åŸå‹"></a>åŸå‹</h3><p>åœ¨çº¯ç²¹çš„åŸå‹æ¨¡å¼ä¸­æ‘’å¼ƒç±»ï¼Œä¸“æ³¨äºå¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">const mamal = &#123;</span><br><span class="line">	name: &#x27;mamal&#x27;,</span><br><span class="line">	get_name: function()&#123;</span><br><span class="line">		return this.name</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">const cat = Object.create(mamal) // è®¾ç½®åŸå‹ä¸ºmamal</span><br><span class="line">mamal.say_hello = function()&#123;console.log(&#x27;hello&#x27;)&#125;</span><br><span class="line">cat.say_hello() // hello</span><br></pre></td></tr></table></figure>
<h3 id="å‡½æ•°åŒ–"><a href="#å‡½æ•°åŒ–" class="headerlink" title="å‡½æ•°åŒ–"></a>å‡½æ•°åŒ–</h3><p>ç»§æ‰¿æ¨¡å¼çš„å¼±ç‚¹æ˜¯æ— æ³•ä¿æŠ¤éšç§ï¼Œå¯ä»¥è‡ªå®šä¹‰å‡½æ•°è¿”å›å¯¹è±¡</p>
<h2 id="ç¬¬å…­ç« -æ•°ç»„"><a href="#ç¬¬å…­ç« -æ•°ç»„" class="headerlink" title="ç¬¬å…­ç«  æ•°ç»„"></a>ç¬¬å…­ç«  æ•°ç»„</h2><h3 id="é•¿åº¦"><a href="#é•¿åº¦" class="headerlink" title="é•¿åº¦"></a>é•¿åº¦</h3><ol>
<li>length æ²¡æœ‰ä¸Šç•Œ arr[1000] ä¹Ÿä¸ä¼šæŠ¥é”™</li>
<li>è®¾ç½®æ›´å¤§çš„ length ä¸ä¼šåˆ†é…æ›´å¤šç©ºé—´</li>
<li>è®¾ç½®æ›´å°çš„ length ä¼šæŠŠæ–°çš„lengthå±æ€§åˆ é™¤</li>
</ol>
<h2 id="ç¬¬ä¸ƒç« -æ­£åˆ™è¡¨è¾¾å¼"><a href="#ç¬¬ä¸ƒç« -æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="ç¬¬ä¸ƒç«  æ­£åˆ™è¡¨è¾¾å¼"></a>ç¬¬ä¸ƒç«  æ­£åˆ™è¡¨è¾¾å¼</h2><h3 id="ä¸€ä¸ªä¾‹å­"><a href="#ä¸€ä¸ªä¾‹å­" class="headerlink" title="ä¸€ä¸ªä¾‹å­"></a>ä¸€ä¸ªä¾‹å­</h3><p>åŒ¹é… url çš„æ­£åˆ™è¡¨è¾¾å¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- éæ•è·åˆ†ç»„1 æ‹¬å·ä¸­?:å¼€å¤´ --&gt;</span><br><span class="line">(?:([A-Za-z]+):)?</span><br><span class="line">&lt;!-- æ•è·åˆ†ç»„1 --&gt;</span><br><span class="line">(/\&#123;0,3&#125;)</span><br><span class="line">&lt;!-- æ•è·åˆ†ç»„2 --&gt;</span><br><span class="line">([0-9.\-A-Za-z]+)</span><br><span class="line">&lt;!-- éæ•è·åˆ†ç»„2 --&gt;</span><br><span class="line">(?::(\d+))?</span><br><span class="line">&lt;!-- éæ•è·åˆ†ç»„3 --&gt;</span><br><span class="line">(?:\/([^?#]*))?</span><br><span class="line">&lt;!-- éæ•è·åˆ†ç»„4 --&gt;</span><br><span class="line">(?:\?([^#]*))?</span><br><span class="line">&lt;!-- éæ•è·åˆ†ç»„5 --&gt;</span><br><span class="line">(?:#(.*))?</span><br><span class="line"></span><br></pre></td></tr></table></figure>




      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/16/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E7%9A%84%E5%87%A0%E7%A7%8D%E5%9C%BA%E6%99%AF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/16/%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%E7%9A%84%E5%87%A0%E7%A7%8D%E5%9C%BA%E6%99%AF/" class="post-title-link" itemprop="url">æ–‡ä»¶ä¸‹è½½çš„å‡ ç§åœºæ™¯</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-16 16:48:24" itemprop="dateCreated datePublished" datetime="2021-12-16T16:48:24+08:00">2021-12-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-12-17 09:28:07" itemprop="dateModified" datetime="2021-12-17T09:28:07+08:00">2021-12-17</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="åŸºç¡€çŸ¥è¯†"><a href="#åŸºç¡€çŸ¥è¯†" class="headerlink" title="åŸºç¡€çŸ¥è¯†"></a>åŸºç¡€çŸ¥è¯†</h1><h2 id="äº†è§£Blob"><a href="#äº†è§£Blob" class="headerlink" title="äº†è§£Blob"></a>äº†è§£Blob</h2><ol>
<li>Blobæ˜¯ä»€ä¹ˆ?<br>Blobæ˜¯è¡¨ç¤ºäºŒè¿›åˆ¶ç±»å‹çš„å¤§å¯¹è±¡ï¼Œå®ƒçš„æ•°æ®å¯ä»¥æŒ‰ç…§æ–‡æœ¬æˆ–è€…äºŒè¿›åˆ¶æ ¼å¼è¿›è¡Œè¯»å–</li>
<li>å¦‚ä½•åˆ›å»ºBlobå¯¹è±¡<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//æ¥æ”¶ä¸¤ä¸ªå‚æ•° blobParts å’Œ options</span><br><span class="line">// blobParts  ç”± ArrayBufferï¼ŒArrayBufferViewï¼ŒBlobï¼ŒDOMString ç­‰å¯¹è±¡æ„æˆçš„æ•°ç»„</span><br><span class="line">// options å¯é€‰å‚æ•°</span><br><span class="line">const b = new Blob(blobParts,options)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="äº†è§£Blob-URL"><a href="#äº†è§£Blob-URL" class="headerlink" title="äº†è§£Blob URL"></a>äº†è§£Blob URL</h2><p>Blob URL/Object URL æ˜¯ä¼ªåè®®ï¼Œè¿™ä¸ªåè®®çš„ä½œç”¨å°±æ˜¯å…è®¸ Blob å¯¹è±¡æˆ–è€… File å¯¹è±¡ç”¨æ¥ä½œä¸ºä¸‹è½½çš„urlæº</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">URL.createObjectURL(new Blob())</span><br><span class="line">// ä½†æ˜¯è¯¥æ–¹æ³•å­˜åœ¨å‰¯ä½œç”¨ï¼Œå­˜å‚¨äº† URL-&gt; Blobå¯¹è±¡çš„æ˜ å°„ï¼Œéœ€è¦åœ¨ä½¿ç”¨åæ¸…é™¤</span><br><span class="line">URL.revokeObjectURL(url) </span><br></pre></td></tr></table></figure>
<h2 id="url-è½¬æ¢ä¸º-blobå¯¹è±¡"><a href="#url-è½¬æ¢ä¸º-blobå¯¹è±¡" class="headerlink" title="url è½¬æ¢ä¸º blobå¯¹è±¡"></a>url è½¬æ¢ä¸º blobå¯¹è±¡</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function dataUrlToBlob(url)&#123;</span><br><span class="line">  const picUrl = `$&#123;url&#125;?t=$&#123;new Date().getTime()&#125;`</span><br><span class="line">  return fetch(picUrl,&#123;</span><br><span class="line">    headers: new Headers(&#123; Origin: window.location.origin &#125;),</span><br><span class="line">    mode: &#x27;cors&#x27;,</span><br><span class="line">  &#125;)</span><br><span class="line">  .then(res =&gt; res.blob())</span><br><span class="line">  .catch(error =&gt; console.log(error))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="aæ ‡ç­¾ä¸‹è½½æ–¹å¼"><a href="#aæ ‡ç­¾ä¸‹è½½æ–¹å¼" class="headerlink" title="aæ ‡ç­¾ä¸‹è½½æ–¹å¼"></a>aæ ‡ç­¾ä¸‹è½½æ–¹å¼</h1><p>åŸç†ï¼šè®¾ç½® a æ ‡ç­¾çš„ download å±æ€§ï¼Œç»“åˆ URL.createObjectURL æ–¹æ³•è®¾ç½® a æ ‡ç­¾çš„ href å±æ€§c<br>é—®é¢˜ï¼šdownload å±æ€§å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ï¼ŒIE11ä»¥ä¸‹ä¸é€‚ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">function  downloadFileByHTMLAnchorElement(blob,fileName)&#123;</span><br><span class="line">  const url = URL.createObjectURL(blob)</span><br><span class="line">  const a = document.createElement(&#x27;a&#x27;)</span><br><span class="line">  a.download = fileName</span><br><span class="line">  a.style.display = &#x27;none&#x27;</span><br><span class="line">  a.target = &#x27;blank&#x27;</span><br><span class="line">  a.href = url</span><br><span class="line">  document.body.appendChild(a)</span><br><span class="line">  a.click()</span><br><span class="line">  document.body.removeChild(a)</span><br><span class="line">  URL.revokeObjectURL(url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="showSaveFilePicker-API-ä¸‹è½½"><a href="#showSaveFilePicker-API-ä¸‹è½½" class="headerlink" title="showSaveFilePicker API ä¸‹è½½"></a>showSaveFilePicker API ä¸‹è½½</h1><p>åŸç†ï¼šåˆ©ç”¨ window å†…ç½®çš„ showSaveFilePicker æ–¹æ³•ï¼Œå¯ä»¥é€‰æ‹©å­˜æ”¾å›¾ç‰‡çš„ä½ç½®<br>é—®é¢˜ï¼šå…¼å®¹æ€§ä¸æ˜¯å¾ˆå¥½</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">async function saveFile(blob,fileName)&#123;</span><br><span class="line">  try &#123;</span><br><span class="line">    const handle = await window.showSaveFilePicker(&#123;</span><br><span class="line">      suggestedName: fileName,</span><br><span class="line">      types: [</span><br><span class="line">        &#123;</span><br><span class="line">          description: &quot;PNG file&quot;,</span><br><span class="line">          accept: &#123;</span><br><span class="line">            &quot;image/png&quot;: [&quot;.png&quot;],</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          description: &quot;Jpeg file&quot;,</span><br><span class="line">          accept: &#123;</span><br><span class="line">            &quot;image/jpeg&quot;: [&quot;.jpeg&quot;],</span><br><span class="line">          &#125;,</span><br><span class="line">         &#125;,</span><br><span class="line">      ]</span><br><span class="line">    &#125;)</span><br><span class="line">    const writable = await handle.createWritable()</span><br><span class="line">    await writable.write(blob)</span><br><span class="line">    await writable.close()</span><br><span class="line">    return handle</span><br><span class="line">  &#125; catch (error) &#123;</span><br><span class="line">    console.error(err.name, err.message)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="FileSaver-js-ä¸‹è½½"><a href="#FileSaver-js-ä¸‹è½½" class="headerlink" title="FileSaver.js ä¸‹è½½"></a>FileSaver.js ä¸‹è½½</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//éœ€è¦å¼•å…¥ FileSaver.js</span><br><span class="line">//1. ä¿å­˜æ–‡æœ¬</span><br><span class="line">let blob = new Blob([&quot;hello&quot;], &#123; type: &quot;text/plain;charset=utf-8&quot; &#125;);</span><br><span class="line">saveAs(blob, &quot;hello.txt&quot;)</span><br><span class="line"></span><br><span class="line">//2. ä¿å­˜çº¿ä¸Šèµ„æº</span><br><span class="line">saveAs(&quot;https://httpbin.org/image&quot;, &quot;image.jpg&quot;)</span><br><span class="line"></span><br><span class="line">//3. ä¿å­˜canvasç”»å¸ƒåŠŸèƒ½</span><br><span class="line">const canvas = document.getElementById(&quot;canvas&quot;)</span><br><span class="line">canvas.toBlob((blob) =&gt; &#123;</span><br><span class="line">	saveAs(blob,&#x27;test.png&#x27;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="Zip-ä¸‹è½½"><a href="#Zip-ä¸‹è½½" class="headerlink" title="Zip ä¸‹è½½"></a>Zip ä¸‹è½½</h1><p>åŸç†ï¼šåˆ©ç”¨ JSZip å’Œ FileSaver å°†æ–‡ä»¶æ‰“åŒ…åå†ä¸‹è½½</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">function downloadByJSZip(imageUrls)&#123;</span><br><span class="line">  let zip = new JSZip()</span><br><span class="line">  Promise.all(imageUrls.map(getFileContent)).then((contents) =&gt; &#123;</span><br><span class="line">    contents.forEach((content, i) =&gt; &#123;</span><br><span class="line">      zip.file(imageUrls[i], content)</span><br><span class="line">    &#125;)</span><br><span class="line">    zip.generateAsync(&#123; type: &quot;blob&quot; &#125;).then(function (blob) &#123;</span><br><span class="line">      saveAs(blob, &quot;material.zip&quot;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">function getFileContent(fileUrl) &#123;</span><br><span class="line">  return new JSZip.external.Promise(function (resolve, reject) &#123;</span><br><span class="line">    JSZipUtils.getBinaryContent(fileUrl, function (err, data) &#123;</span><br><span class="line">      if (err) &#123;</span><br><span class="line">        reject(err)</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        resolve(data)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6989413354628448264#heading-7">https://juejin.cn/post/6989413354628448264#heading-7</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/14/typescript%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/14/typescript%E9%AB%98%E7%BA%A7%E6%8A%80%E5%B7%A7/" class="post-title-link" itemprop="url">typescripté«˜çº§æŠ€å·§</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-14 15:52:50" itemprop="dateCreated datePublished" datetime="2021-12-14T15:52:50+08:00">2021-12-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-12-15 09:57:42" itemprop="dateModified" datetime="2021-12-15T09:57:42+08:00">2021-12-15</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="keyof"><a href="#keyof" class="headerlink" title="keyof"></a>keyof</h1><p>keyof ä¸ Object.keys() ç›¸ä¼¼ï¼Œä½†æ˜¯ keyof å–çš„æ˜¯ interface çš„é”®</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">interface Point&#123;</span><br><span class="line">	x: number</span><br><span class="line">	y: number</span><br><span class="line">&#125;</span><br><span class="line">type keys = &#x27;x&#x27; | &#x27;y&#x27;</span><br><span class="line">//ç­‰åŒäº</span><br><span class="line">type keys = keyof Point</span><br></pre></td></tr></table></figure>
<p>å‡è®¾æœ‰ä¸€ä¸ªobjectï¼Œæˆ‘ä»¬è¦è·å–objectçš„æŸä¸ªå€¼</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function get(o: object,name: string)&#123;</span><br><span class="line">	return o[name]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ä»¥ä¸Šæ–¹æ³•å­˜åœ¨ä¸¤ä¸ªé—®é¢˜</p>
<ol>
<li>æ— æ³•ç¡®å®šè¿”å›çš„ç±»å‹</li>
<li>æ²¡æœ‰å¯¹é”®è¿›è¡Œé™åˆ¶<br>ä½¿ç”¨keyofé‡å†™<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function get&lt;T extends Object,K extends keyof T&gt;(o: T,name: K):T[K]&#123;</span><br><span class="line">	return o[name]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
å¯¹äº keyof çš„å¦ä¸€ä¸ªä½¿ç”¨æ–¹æ³•<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type PropertyName = keyof any</span><br><span class="line">//ç­‰åŒäº</span><br><span class="line">type PropertyName = string | number | symbol</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="Required-amp-Partial-amp-Pick"><a href="#Required-amp-Partial-amp-Pick" class="headerlink" title="Required &amp; Partial &amp; Pick"></a>Required &amp; Partial &amp; Pick</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">type Partial&lt;T&gt; = &#123;</span><br><span class="line">	[P in keyof T]?: T[P]</span><br><span class="line">&#125;</span><br><span class="line">type Required&lt;T&gt; = &#123;</span><br><span class="line">	[P in keyof T]-?: T[P]</span><br><span class="line">&#125;</span><br><span class="line">type Pick&lt;T,K in keyof T&gt; = &#123;</span><br><span class="line">	[P in K]: T[P]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface User&#123;</span><br><span class="line">	id: number</span><br><span class="line">	name: string</span><br><span class="line">	age: number</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// ç­‰åŒäº &#123;id?:number, name?:string, age?:number&#125;</span><br><span class="line">type PartialUser = Partial&lt;User&gt;</span><br><span class="line"></span><br><span class="line">// ç­‰äº &#123;name:string, age:number&#125;</span><br><span class="line">type PickUser = Pick&lt;User,&#x27;age&#x27; | &#x27;name&#x27;&gt;</span><br></pre></td></tr></table></figure>
<h1 id="Condition-Type"><a href="#Condition-Type" class="headerlink" title="Condition Type"></a>Condition Type</h1><p>å¯ä»¥æ‰©å±•ä¸€äº›åŸºæœ¬ç±»å‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type isTrue&lt;T&gt; = T extends true ? true : false</span><br><span class="line">//ç›¸å½“äºtype t = false</span><br><span class="line">type t = isTrue&lt;number&gt;</span><br><span class="line">//ç›¸å½“äºtype t = false</span><br><span class="line">type t = isTrue&lt;false&gt;</span><br></pre></td></tr></table></figure>
<h1 id="never-amp-Exclude-amp-Extract-amp-Omit"><a href="#never-amp-Exclude-amp-Extract-amp-Omit" class="headerlink" title="never &amp; Exclude &amp; Extract &amp; Omit"></a>never &amp; Exclude &amp; Extract &amp; Omit</h1><p>never ç»“åˆ  Condition Type å¯ä»¥æ¨å‡ºå¾ˆå¤šå®ç”¨çš„ç±»å‹ä¾‹å¦‚ Exclude å’Œ Extract ã€ä¸Excludeç›¸åï¼Œæ˜¯å–äº¤é›†ã€‘</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">type Exclude&lt;T,U&gt; = T extends U ? never : T</span><br><span class="line">//ç›¸å½“äºtype A = &#x27;x&#x27;</span><br><span class="line">type A =  Exclude&lt;&#x27;x&#x27; | &#x27;a&#x27;, &#x27;a&#x27;&gt;</span><br><span class="line"></span><br><span class="line">//type B = &#x27;x&#x27;</span><br><span class="line">type B = Extract&lt;&#x27;x&#x27; | &#x27;a&#x27;, &#x27;x&#x27; | &#x27;y&#x27;&gt;</span><br><span class="line"></span><br><span class="line">//é€šè¿‡ Exclude æ¨å‡º Omitçš„å†™æ³•</span><br><span class="line">type Omit&lt;T, K extends keyof T&gt; = Pick&lt;T,Exclude&lt;keyof T,K&gt;&gt;</span><br><span class="line"></span><br><span class="line">//ç›¸å½“äºtype C = &#123; name:string, age:number &#125;</span><br><span class="line">type C = Omit&lt;User,&#x27;id&#x27;&gt;</span><br></pre></td></tr></table></figure>
<h1 id="interface-å’Œ-type-çš„åŒºåˆ«"><a href="#interface-å’Œ-type-çš„åŒºåˆ«" class="headerlink" title="interface å’Œ type çš„åŒºåˆ«"></a>interface å’Œ type çš„åŒºåˆ«</h1><ol>
<li>å®šä¹‰ä¸€ä¸ªå‡½æ•°<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">interface SetPoint&#123;</span><br><span class="line">	(x: number,y: number) =&gt; void</span><br><span class="line">&#125;</span><br><span class="line">type SetPoint = (x: number,y: number) =&gt; void</span><br></pre></td></tr></table></figure></li>
<li>å‘å¤–æ‹“å±•<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">interface PartialPointX&#123; x: number &#125;</span><br><span class="line">interface Point extends PartialPointX&#123; y:number &#125;</span><br><span class="line"></span><br><span class="line">type PartialPointX = &#123; x: number &#125;</span><br><span class="line">type Point = PartialPointX &amp; &#123; y: number &#125;</span><br></pre></td></tr></table></figure></li>
<li>interface å¯ä»¥å®šä¹‰åˆå¹¶<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface Point&#123; x: number &#125;</span><br><span class="line">interface Point&#123; y: number &#125;</span><br><span class="line">const p:Point = &#123; x: 3, y: 4 &#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="Record-amp-Dictionary-amp-Many"><a href="#Record-amp-Dictionary-amp-Many" class="headerlink" title="Record &amp; Dictionary &amp; Many"></a>Record &amp; Dictionary &amp; Many</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">type Record&lt;K extends keyof any,T&gt; = &#123;</span><br><span class="line">	[P in K]:T</span><br><span class="line">&#125;</span><br><span class="line">interface Dictionary&lt;T&gt;&#123;</span><br><span class="line">	[index: string]:T</span><br><span class="line">&#125;</span><br><span class="line">//ä»¥ä¸‹äºŒè€…ç­‰ä»·</span><br><span class="line">type A = Record&lt;string,any&gt;</span><br><span class="line">type A = Dictionary&lt;any&gt;</span><br></pre></td></tr></table></figure>
<h1 id="infer-amp-ReturnType-amp-Parameters"><a href="#infer-amp-ReturnType-amp-Parameters" class="headerlink" title="infer &amp; ReturnType &amp; Parameters"></a>infer &amp; ReturnType &amp; Parameters</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// infer ç”¨äº æ¨å‡ºæ³›å‹</span><br><span class="line">//ç›¸å½“äº type A = string</span><br><span class="line">type A = ReturnType&lt;()=&gt;string&gt;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/13/typescript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/13/typescript/" class="post-title-link" itemprop="url">typescript</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-13 15:54:54" itemprop="dateCreated datePublished" datetime="2021-12-13T15:54:54+08:00">2021-12-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-12-14 10:30:29" itemprop="dateModified" datetime="2021-12-14T10:30:29+08:00">2021-12-14</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="typescriptåŸºç¡€ç±»å‹"><a href="#typescriptåŸºç¡€ç±»å‹" class="headerlink" title="typescriptåŸºç¡€ç±»å‹"></a>typescriptåŸºç¡€ç±»å‹</h1><h2 id="Boolean-ç±»å‹"><a href="#Boolean-ç±»å‹" class="headerlink" title="Boolean ç±»å‹"></a>Boolean ç±»å‹</h2><h2 id="Number-ç±»å‹"><a href="#Number-ç±»å‹" class="headerlink" title="Number ç±»å‹"></a>Number ç±»å‹</h2><h2 id="String-ç±»å‹"><a href="#String-ç±»å‹" class="headerlink" title="String ç±»å‹"></a>String ç±»å‹</h2><h2 id="Array-ç±»å‹"><a href="#Array-ç±»å‹" class="headerlink" title="Array ç±»å‹"></a>Array ç±»å‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let list:number[] = [1,2,3]</span><br><span class="line">let list:Array&lt;number&gt; = [1,2,3]//Array&lt;number&gt;æ³›å‹è¯­æ³•</span><br></pre></td></tr></table></figure>
<h2 id="Enum-ç±»å‹"><a href="#Enum-ç±»å‹" class="headerlink" title="Enum ç±»å‹"></a>Enum ç±»å‹</h2><ol>
<li>æ•°å­—æšä¸¾<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">enum Direction&#123;</span><br><span class="line">	A,</span><br><span class="line">	B</span><br><span class="line">&#125;</span><br><span class="line">//é»˜è®¤æƒ…å†µä¸‹ä»0å¼€å§‹ï¼ŒDirection.A çš„å€¼ä¸º 0ï¼Œå…¶ä½™é€’å¢</span><br></pre></td></tr></table></figure></li>
<li>å­—ç¬¦ä¸²æšä¸¾<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">enum Direction &#123;</span><br><span class="line">  NORTH = &quot;NORTH&quot;,</span><br><span class="line">  SOUTH = &quot;SOUTH&quot;,</span><br><span class="line">  EAST = &quot;EAST&quot;,</span><br><span class="line">  WEST = &quot;WEST&quot;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>å¼‚æ„æšä¸¾ã€å­—ç¬¦ä¸²å’Œæ•°å­—æ··åˆã€‘<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">enum Test&#123;</span><br><span class="line">	A,</span><br><span class="line">	B = &#x27;bbbb&#x27;</span><br><span class="line">&#125;</span><br><span class="line">//æ•°å­—æšä¸¾ä¸å­—ç¬¦ä¸²æšä¸¾ç›¸æ¯”ï¼Œå¤šäº†åå‘æ˜ å°„</span><br><span class="line">console.log(Test.A)//è¾“å‡º: 0</span><br><span class="line">console.log(Test[0])//è¾“å‡º: A</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="Any-ç±»å‹"><a href="#Any-ç±»å‹" class="headerlink" title="Any ç±»å‹"></a>Any ç±»å‹</h2><p>ä»»ä½•ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸ºanyç±»å‹ï¼Œæœ¬è´¨ä¸Šå¯ä»¥æ˜¯ç”¨æ¥é€ƒé¿ç±»å‹æ£€æµ‹ï¼Œç”±äºanyç±»å‹è¿‡äºå®½æ¾ï¼Œtypescriptå¼•å…¥äº†unknownç±»å‹</p>
<h2 id="Unknown-ç±»å‹"><a href="#Unknown-ç±»å‹" class="headerlink" title="Unknown ç±»å‹"></a>Unknown ç±»å‹</h2><p>å°±åƒæ‰€æœ‰ç±»å‹éƒ½å¯ä»¥èµ‹å€¼ç»™anyï¼Œæ‰€æœ‰ç±»å‹ä¹Ÿéƒ½å¯ä»¥èµ‹å€¼ç»™ unknown</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">let value:unknown</span><br><span class="line">value = true //ok</span><br><span class="line">value = 1 //ok</span><br><span class="line">value = &#123;&#125; //ok</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ unknown ç±»å‹çš„å€¼åªèƒ½èµ‹å€¼ç»™ any æˆ–è€…æ˜¯ unknown ç±»å‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let value1:unknown = value //ok</span><br><span class="line">let value2:any = value //ok</span><br><span class="line">let value3:boolean = value//error</span><br></pre></td></tr></table></figure>
<p>å¯¹ç±»å‹ä¸º unknown çš„å€¼è¿›è¡Œæ“ä½œä¼šæŠ¥é”™</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">value.trim() //error</span><br><span class="line">value.foo.test //error</span><br></pre></td></tr></table></figure>

<h2 id="Turple-ç±»å‹ã€å…ƒç»„ã€‘"><a href="#Turple-ç±»å‹ã€å…ƒç»„ã€‘" class="headerlink" title="Turple ç±»å‹ã€å…ƒç»„ã€‘"></a>Turple ç±»å‹ã€å…ƒç»„ã€‘</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let tupleType:[string,boolean] = [&#x27;123&#x27;,true]</span><br></pre></td></tr></table></figure>
<h2 id="Void-ç±»å‹"><a href="#Void-ç±»å‹" class="headerlink" title="Void ç±»å‹"></a>Void ç±»å‹</h2><p>ä¸anyç±»å‹ç›¸åï¼Œè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹</p>
<h2 id="Null-å’Œ-Undefined-ç±»å‹"><a href="#Null-å’Œ-Undefined-ç±»å‹" class="headerlink" title="Null å’Œ Undefined ç±»å‹"></a>Null å’Œ Undefined ç±»å‹</h2><h2 id="Never-ç±»å‹"><a href="#Never-ç±»å‹" class="headerlink" title="Never ç±»å‹"></a>Never ç±»å‹</h2><p>è¡¨ç¤ºä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ï¼Œè¡¨ç¤ºé‚£äº›ä¼šæŠ›å‡ºå¼‚å¸¸</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function error(message:string):never&#123;</span><br><span class="line">	throw new Error(message)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨ never é¿å…å‡ºç°æ–°å¢äº†è”åˆç±»å‹æ²¡æœ‰å¯¹åº”çš„å®ç°ï¼Œç›®çš„å°±æ˜¯å†™å‡ºç±»å‹ç»å¯¹å®‰å…¨çš„ä»£ç </p>
<h1 id="typescriptæ–­è¨€"><a href="#typescriptæ–­è¨€" class="headerlink" title="typescriptæ–­è¨€"></a>typescriptæ–­è¨€</h1><p>æœ‰æ—¶å€™ä¼šå­˜åœ¨ä½ æ¯” typescript æ›´åŠ äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¿™æ—¶å€™å°±éœ€è¦æ–­è¨€</p>
<h2 id="å°–æ‹¬å·è¯­æ³•"><a href="#å°–æ‹¬å·è¯­æ³•" class="headerlink" title="å°–æ‹¬å·è¯­æ³•"></a>å°–æ‹¬å·è¯­æ³•</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let someValue:any = &quot;this is a string&quot; </span><br><span class="line">let strLength: number = (&lt;string&gt;someValue).length</span><br></pre></td></tr></table></figure>
<h2 id="asè¯­æ³•"><a href="#asè¯­æ³•" class="headerlink" title="asè¯­æ³•"></a>asè¯­æ³•</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let someValue:any = &quot;this is a string&quot;</span><br><span class="line">let strLength: number = (someValue as string).length</span><br></pre></td></tr></table></figure>
<h1 id="ç±»å‹å®ˆå«"><a href="#ç±»å‹å®ˆå«" class="headerlink" title="ç±»å‹å®ˆå«"></a>ç±»å‹å®ˆå«</h1><p>ä¸»è¦æ–¹æ³•ï¼šç”¨äºç¡®ä¿è¯¥ç±»å‹åœ¨ä¸€å®šçš„èŒƒå›´å†…ï¼Œæ£€æµ‹å±æ€§ã€æ–¹æ³•æˆ–åŸå‹</p>
<h2 id="in"><a href="#in" class="headerlink" title="in"></a>in</h2><h2 id="typeof"><a href="#typeof" class="headerlink" title="typeof"></a>typeof</h2><h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h2><h2 id="è‡ªå®šä¹‰"><a href="#è‡ªå®šä¹‰" class="headerlink" title="è‡ªå®šä¹‰"></a>è‡ªå®šä¹‰</h2><h1 id="è”åˆç±»å‹å’Œç±»å‹åˆ«å"><a href="#è”åˆç±»å‹å’Œç±»å‹åˆ«å" class="headerlink" title="è”åˆç±»å‹å’Œç±»å‹åˆ«å"></a>è”åˆç±»å‹å’Œç±»å‹åˆ«å</h1><h2 id="è”åˆç±»å‹"><a href="#è”åˆç±»å‹" class="headerlink" title="è”åˆç±»å‹"></a>è”åˆç±»å‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let name:string|undefined = &quot;123&quot;</span><br></pre></td></tr></table></figure>
<h2 id="å¯è¾¨è¯†è”åˆ"><a href="#å¯è¾¨è¯†è”åˆ" class="headerlink" title="å¯è¾¨è¯†è”åˆ"></a>å¯è¾¨è¯†è”åˆ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type D = A | B | C</span><br></pre></td></tr></table></figure>
<h2 id="ç±»å‹åˆ«å"><a href="#ç±»å‹åˆ«å" class="headerlink" title="ç±»å‹åˆ«å"></a>ç±»å‹åˆ«å</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type Alias = string | string[];</span><br></pre></td></tr></table></figure>
<h1 id="äº¤å‰ç±»å‹"><a href="#äº¤å‰ç±»å‹" class="headerlink" title="äº¤å‰ç±»å‹"></a>äº¤å‰ç±»å‹</h1><p>å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type C = A &amp; B</span><br></pre></td></tr></table></figure>
<h1 id="typescriptæ³›å‹"><a href="#typescriptæ³›å‹" class="headerlink" title="typescriptæ³›å‹"></a>typescriptæ³›å‹</h1><p>æ³›å‹æ˜¯å…è®¸ä¸€ä¸ªå‡½æ•°æ¥å—ä¸åŒç±»å‹å‚æ•°çš„æ¨¡æ¿</p>
<h2 id="æ³›å‹æ¥å£"><a href="#æ³›å‹æ¥å£" class="headerlink" title="æ³›å‹æ¥å£"></a>æ³›å‹æ¥å£</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">interface G&lt;T&gt;&#123;</span><br><span class="line">	(arg:T):T</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ³›å‹ç±»"><a href="#æ³›å‹ç±»" class="headerlink" title="æ³›å‹ç±»"></a>æ³›å‹ç±»</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">class Test&lt;T&gt;&#123;</span><br><span class="line">	name:T</span><br><span class="line">	age:T</span><br><span class="line">&#125;</span><br><span class="line">const t = new Test&lt;string&gt;()</span><br><span class="line">t.name = &#x27;hua hua&#x27;</span><br></pre></td></tr></table></figure>
<h2 id="æ³›å‹å˜é‡"><a href="#æ³›å‹å˜é‡" class="headerlink" title="æ³›å‹å˜é‡"></a>æ³›å‹å˜é‡</h2><p>å¸¸è§æ³›å‹å˜é‡çš„å«ä¹‰</p>
<ol>
<li>T type ç±»å‹</li>
<li>K key é”®ç±»å‹</li>
<li>V value å€¼ç±»å‹</li>
<li>E element å…ƒç´ ç±»å‹</li>
</ol>
<h2 id="æ³›å‹å·¥å…·ç±»å‹"><a href="#æ³›å‹å·¥å…·ç±»å‹" class="headerlink" title="æ³›å‹å·¥å…·ç±»å‹"></a>æ³›å‹å·¥å…·ç±»å‹</h2><ol>
<li>typeof è·å–ä¸€ä¸ªå˜é‡å£°æ˜æˆ–è€…å¯¹è±¡çš„ç±»å‹<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface Person&#123;</span><br><span class="line">	name:string</span><br><span class="line">	age:number</span><br><span class="line">&#125;</span><br><span class="line">const human:Person = &#123;name:&#x27;wansui&#x27;,age:1&#125;</span><br><span class="line">type Human = typeof human</span><br></pre></td></tr></table></figure></li>
<li>keyof è·å–å¯¹è±¡çš„é”®<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">type K1 = keyof Person // &#x27;name&#x27; | &#x27;age&#x27;</span><br><span class="line">type K2 = keyof Person[] // &#x27;length&#x27; | &#x27;toString&#x27; | &#x27;pop&#x27; ...</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>in éå†æšä¸¾ç±»å‹<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">type Keys = &#x27;a&#x27; | &#x27;b&#x27; |&#x27;c&#x27;</span><br><span class="line">type Obj = &#123;</span><br><span class="line">	[key in Keys]:string</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>extends<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">interface Person&#123;</span><br><span class="line">	name:string</span><br><span class="line">	age:number</span><br><span class="line">&#125;</span><br><span class="line">function distributeWork&lt;T extends Person&gt;(args:T):T&#123;</span><br><span class="line">	//TO DO</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>Partial å°†æŸä¸ªç±»å‹é‡Œçš„å±æ€§å…¨éƒ¨å˜æˆå¯é€‰<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function test(item1:Person,item2:Partial&lt;Person&gt;)&#123;</span><br><span class="line">	//TO DO</span><br><span class="line">&#125;</span><br><span class="line">test(&#123;name:&#x27;wansui&#x27;,age:1&#125;,&#123;name:&#x27;cc&#x27;&#125;)</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="typescriptè£…é¥°å™¨"><a href="#typescriptè£…é¥°å™¨" class="headerlink" title="typescriptè£…é¥°å™¨"></a>typescriptè£…é¥°å™¨</h1><h2 id="è£…é¥°å™¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#è£…é¥°å™¨æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="è£…é¥°å™¨æ˜¯ä»€ä¹ˆï¼Ÿ"></a>è£…é¥°å™¨æ˜¯ä»€ä¹ˆï¼Ÿ</h2><ul>
<li>æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼</li>
<li>è¡¨è¾¾å¼æ‰§è¡Œåè¿”å›ä¸€ä¸ªå‡½æ•°</li>
<li>å‡½æ•°çš„å…¥å‚ä¸º target name descriptor</li>
<li>æ‰§è¡Œè¯¥å‡½æ•°åï¼Œå¯èƒ½é…ç½® target å¯¹è±¡<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function Greeter(msg:string):void&#123;</span><br><span class="line">	return function(target:Function)&#123;</span><br><span class="line">		target.prototype.sayHi = ()=&gt;&#123;</span><br><span class="line">		console.log(msg)</span><br><span class="line">	&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">@Greeter(&#x27;hello world&#x27;)</span><br><span class="line">class Greeting&#123;</span><br><span class="line">	sayHi:Function</span><br><span class="line">&#125;</span><br><span class="line">const g = new Greeting()</span><br><span class="line">g.sayHi()</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="å±æ€§è£…é¥°å™¨"><a href="#å±æ€§è£…é¥°å™¨" class="headerlink" title="å±æ€§è£…é¥°å™¨"></a>å±æ€§è£…é¥°å™¨</h2><ul>
<li>è£…é¥°ç±»çš„å±æ€§</li>
<li>å‡½æ•°çš„å…¥å‚ä¸º target propertyKey</li>
</ul>
<h2 id="æ–¹æ³•è£…é¥°å™¨"><a href="#æ–¹æ³•è£…é¥°å™¨" class="headerlink" title="æ–¹æ³•è£…é¥°å™¨"></a>æ–¹æ³•è£…é¥°å™¨</h2><ul>
<li>è£…é¥°ç±»çš„æ–¹æ³•</li>
<li>å‡½æ•°çš„å…¥å‚ä¸º target propertyKey descriptor</li>
</ul>
<h2 id="å‚æ•°è£…é¥°å™¨"><a href="#å‚æ•°è£…é¥°å™¨" class="headerlink" title="å‚æ•°è£…é¥°å™¨"></a>å‚æ•°è£…é¥°å™¨</h2><ul>
<li>è£…é¥°å‡½æ•°çš„å‚æ•°</li>
<li>å‡½æ•°çš„å…¥å‚ä¸º target propertyKey parameterIndex</li>
</ul>
<h1 id="ç¼–è¯‘ä¸Šä¸‹æ–‡"><a href="#ç¼–è¯‘ä¸Šä¸‹æ–‡" class="headerlink" title="ç¼–è¯‘ä¸Šä¸‹æ–‡"></a>ç¼–è¯‘ä¸Šä¸‹æ–‡</h1><h2 id="tsconfig-jsonçš„ä½œç”¨"><a href="#tsconfig-jsonçš„ä½œç”¨" class="headerlink" title="tsconfig.jsonçš„ä½œç”¨"></a>tsconfig.jsonçš„ä½œç”¨</h2><ul>
<li>æ ‡è¯†æ ¹è·¯å¾„</li>
<li>æŒ‡å®šç¼–è¯‘æ–‡ä»¶</li>
</ul>
<h2 id="é‡è¦å­—æ®µ"><a href="#é‡è¦å­—æ®µ" class="headerlink" title="é‡è¦å­—æ®µ"></a>é‡è¦å­—æ®µ</h2><ul>
<li>files è®¾ç½®è¦ç¼–è¯‘çš„æ–‡ä»¶åç§°</li>
<li>include è®¾ç½®éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„åŒ¹é…</li>
<li>exclude è®¾ç½®ä¸éœ€è¦ç¼–è¯‘çš„æ–‡ä»¶ï¼Œæ”¯æŒè·¯å¾„åŒ¹é…</li>
<li>compilerOptions è®¾ç½®ä¸ç¼–è¯‘æµç¨‹ç›¸å…³çš„é€‰é¡¹</li>
</ul>
<h2 id="compilerOptions-è¯¦ç»†é…ç½®"><a href="#compilerOptions-è¯¦ç»†é…ç½®" class="headerlink" title="compilerOptions è¯¦ç»†é…ç½®"></a>compilerOptions è¯¦ç»†é…ç½®</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">	&#123;</span><br><span class="line">	  &quot;compilerOptions&quot;: &#123;</span><br><span class="line"></span><br><span class="line">	    /* åŸºæœ¬é€‰é¡¹ */</span><br><span class="line">	    &quot;target&quot;: &quot;es5&quot;,                       // æŒ‡å®š ECMAScript ç›®æ ‡ç‰ˆæœ¬: &#x27;ES3&#x27; (default), &#x27;ES5&#x27;, &#x27;ES6&#x27;/&#x27;ES2015&#x27;, &#x27;ES2016&#x27;, &#x27;ES2017&#x27;, or &#x27;ESNEXT&#x27;</span><br><span class="line">	    &quot;module&quot;: &quot;commonjs&quot;,                  // æŒ‡å®šä½¿ç”¨æ¨¡å—: &#x27;commonjs&#x27;, &#x27;amd&#x27;, &#x27;system&#x27;, &#x27;umd&#x27; or &#x27;es2015&#x27;</span><br><span class="line">	    &quot;lib&quot;: [],                             // æŒ‡å®šè¦åŒ…å«åœ¨ç¼–è¯‘ä¸­çš„åº“æ–‡ä»¶</span><br><span class="line">	    &quot;allowJs&quot;: true,                       // å…è®¸ç¼–è¯‘ javascript æ–‡ä»¶</span><br><span class="line">	    &quot;checkJs&quot;: true,                       // æŠ¥å‘Š javascript æ–‡ä»¶ä¸­çš„é”™è¯¯</span><br><span class="line">	    &quot;jsx&quot;: &quot;preserve&quot;,                     // æŒ‡å®š jsx ä»£ç çš„ç”Ÿæˆ: &#x27;preserve&#x27;, &#x27;react-native&#x27;, or &#x27;react&#x27;</span><br><span class="line">	    &quot;declaration&quot;: true,                   // ç”Ÿæˆç›¸åº”çš„ &#x27;.d.ts&#x27; æ–‡ä»¶</span><br><span class="line">	    &quot;sourceMap&quot;: true,                     // ç”Ÿæˆç›¸åº”çš„ &#x27;.map&#x27; æ–‡ä»¶</span><br><span class="line">	    &quot;outFile&quot;: &quot;./&quot;,                       // å°†è¾“å‡ºæ–‡ä»¶åˆå¹¶ä¸ºä¸€ä¸ªæ–‡ä»¶</span><br><span class="line">	    &quot;outDir&quot;: &quot;./&quot;,                        // æŒ‡å®šè¾“å‡ºç›®å½•</span><br><span class="line">	    &quot;rootDir&quot;: &quot;./&quot;,                       // ç”¨æ¥æ§åˆ¶è¾“å‡ºç›®å½•ç»“æ„ --outDir.</span><br><span class="line">	    &quot;removeComments&quot;: true,                // åˆ é™¤ç¼–è¯‘åçš„æ‰€æœ‰çš„æ³¨é‡Š</span><br><span class="line">	    &quot;noEmit&quot;: true,                        // ä¸ç”Ÿæˆè¾“å‡ºæ–‡ä»¶</span><br><span class="line">	    &quot;importHelpers&quot;: true,                 // ä» tslib å¯¼å…¥è¾…åŠ©å·¥å…·å‡½æ•°</span><br><span class="line">	    &quot;isolatedModules&quot;: true,               // å°†æ¯ä¸ªæ–‡ä»¶åšä¸ºå•ç‹¬çš„æ¨¡å— ï¼ˆä¸ &#x27;ts.transpileModule&#x27; ç±»ä¼¼ï¼‰.</span><br><span class="line"></span><br><span class="line">	    /* ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥é€‰é¡¹ */</span><br><span class="line">	    &quot;strict&quot;: true,                        // å¯ç”¨æ‰€æœ‰ä¸¥æ ¼ç±»å‹æ£€æŸ¥é€‰é¡¹</span><br><span class="line">	    &quot;noImplicitAny&quot;: true,                 // åœ¨è¡¨è¾¾å¼å’Œå£°æ˜ä¸Šæœ‰éšå«çš„ anyç±»å‹æ—¶æŠ¥é”™</span><br><span class="line">	    &quot;strictNullChecks&quot;: true,              // å¯ç”¨ä¸¥æ ¼çš„ null æ£€æŸ¥</span><br><span class="line">	    &quot;noImplicitThis&quot;: true,                // å½“ this è¡¨è¾¾å¼å€¼ä¸º any ç±»å‹çš„æ—¶å€™ï¼Œç”Ÿæˆä¸€ä¸ªé”™è¯¯</span><br><span class="line">	    &quot;alwaysStrict&quot;: true,                  // ä»¥ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥æ¯ä¸ªæ¨¡å—ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é‡ŒåŠ å…¥ &#x27;use strict&#x27;</span><br><span class="line"></span><br><span class="line">	    /* é¢å¤–çš„æ£€æŸ¥ */</span><br><span class="line">	    &quot;noUnusedLocals&quot;: true,                // æœ‰æœªä½¿ç”¨çš„å˜é‡æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class="line">	    &quot;noUnusedParameters&quot;: true,            // æœ‰æœªä½¿ç”¨çš„å‚æ•°æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class="line">	    &quot;noImplicitReturns&quot;: true,             // å¹¶ä¸æ˜¯æ‰€æœ‰å‡½æ•°é‡Œçš„ä»£ç éƒ½æœ‰è¿”å›å€¼æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯</span><br><span class="line">	    &quot;noFallthroughCasesInSwitch&quot;: true,    // æŠ¥å‘Š switch è¯­å¥çš„ fallthrough é”™è¯¯ã€‚ï¼ˆå³ï¼Œä¸å…è®¸ switch çš„ case è¯­å¥è´¯ç©¿ï¼‰</span><br><span class="line"></span><br><span class="line">	    /* æ¨¡å—è§£æé€‰é¡¹ */</span><br><span class="line">	    &quot;moduleResolution&quot;: &quot;node&quot;,            // é€‰æ‹©æ¨¡å—è§£æç­–ç•¥ï¼š &#x27;node&#x27; (Node.js) or &#x27;classic&#x27; (TypeScript pre-1.6)</span><br><span class="line">	    &quot;baseUrl&quot;: &quot;./&quot;,                       // ç”¨äºè§£æéç›¸å¯¹æ¨¡å—åç§°çš„åŸºç›®å½•</span><br><span class="line">	    &quot;paths&quot;: &#123;&#125;,                           // æ¨¡å—ååˆ°åŸºäº baseUrl çš„è·¯å¾„æ˜ å°„çš„åˆ—è¡¨</span><br><span class="line">	    &quot;rootDirs&quot;: [],                        // æ ¹æ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œå…¶ç»„åˆå†…å®¹è¡¨ç¤ºé¡¹ç›®è¿è¡Œæ—¶çš„ç»“æ„å†…å®¹</span><br><span class="line">	    &quot;typeRoots&quot;: [],                       // åŒ…å«ç±»å‹å£°æ˜çš„æ–‡ä»¶åˆ—è¡¨</span><br><span class="line">	    &quot;types&quot;: [],                           // éœ€è¦åŒ…å«çš„ç±»å‹å£°æ˜æ–‡ä»¶ååˆ—è¡¨</span><br><span class="line">	    &quot;allowSyntheticDefaultImports&quot;: true,  // å…è®¸ä»æ²¡æœ‰è®¾ç½®é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­é»˜è®¤å¯¼å…¥ã€‚</span><br><span class="line"></span><br><span class="line">	    /* Source Map Options */</span><br><span class="line">	    &quot;sourceRoot&quot;: &quot;./&quot;,                    // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ° TypeScript æ–‡ä»¶è€Œä¸æ˜¯æºæ–‡ä»¶çš„ä½ç½®</span><br><span class="line">	    &quot;mapRoot&quot;: &quot;./&quot;,                       // æŒ‡å®šè°ƒè¯•å™¨åº”è¯¥æ‰¾åˆ°æ˜ å°„æ–‡ä»¶è€Œä¸æ˜¯ç”Ÿæˆæ–‡ä»¶çš„ä½ç½®</span><br><span class="line">	    &quot;inlineSourceMap&quot;: true,               // ç”Ÿæˆå•ä¸ª soucemaps æ–‡ä»¶ï¼Œè€Œä¸æ˜¯å°† sourcemaps ç”Ÿæˆä¸åŒçš„æ–‡ä»¶</span><br><span class="line">	    &quot;inlineSources&quot;: true,                 // å°†ä»£ç ä¸ sourcemaps ç”Ÿæˆåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¦æ±‚åŒæ—¶è®¾ç½®äº† --inlineSourceMap æˆ– --sourceMap å±æ€§</span><br><span class="line"></span><br><span class="line">	    /* å…¶ä»–é€‰é¡¹ */</span><br><span class="line">	    &quot;experimentalDecorators&quot;: true,        // å¯ç”¨è£…é¥°å™¨</span><br><span class="line">	    &quot;emitDecoratorMetadata&quot;: true          // ä¸ºè£…é¥°å™¨æä¾›å…ƒæ•°æ®çš„æ”¯æŒ</span><br><span class="line">	  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/10/%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84react/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/10/%E5%88%9B%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84react/" class="post-title-link" itemprop="url">åˆ›å»ºè‡ªå·±çš„react</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-10 09:40:19" itemprop="dateCreated datePublished" datetime="2021-12-10T09:40:19+08:00">2021-12-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-12-13 15:03:27" itemprop="dateModified" datetime="2021-12-13T15:03:27+08:00">2021-12-13</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ä½¿ç”¨Reactåˆ›å»ºä¸€ä¸ªDOMå…ƒç´ "><a href="#ä½¿ç”¨Reactåˆ›å»ºä¸€ä¸ªDOMå…ƒç´ " class="headerlink" title="ä½¿ç”¨Reactåˆ›å»ºä¸€ä¸ªDOMå…ƒç´ "></a>ä½¿ç”¨Reactåˆ›å»ºä¸€ä¸ªDOMå…ƒç´ </h1><p>åœ¨reactä¸­èƒ½çœ‹åˆ°è¿™æ ·çš„å†™æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const element = &lt;h1 title=&quot;foo&quot;&gt;hello&lt;/h1&gt;</span><br><span class="line">const container = document.getElementById(&quot;root&quot;)</span><br><span class="line">ReactDOM.render(element,container)</span><br></pre></td></tr></table></figure>
<h1 id="React-createElement-æ–¹æ³•è¿”å›äº†ä»€ä¹ˆï¼Ÿ"><a href="#React-createElement-æ–¹æ³•è¿”å›äº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="React.createElement æ–¹æ³•è¿”å›äº†ä»€ä¹ˆï¼Ÿ"></a>React.createElement æ–¹æ³•è¿”å›äº†ä»€ä¹ˆï¼Ÿ</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//ä¸Šè¿°åˆ›å»ºelementçš„æ–¹æ³•ç­‰äºå¦‚ä¸‹</span><br><span class="line">const element = React.createElement(&quot;h1&quot;,&#123;title:&quot;foo&quot;&#125;,&quot;hello&quot;)</span><br></pre></td></tr></table></figure>
<p>React.createElement æ‰§è¡Œä¹‹åè¿”å›çš„å…¶å®æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡ç»“æ„å¦‚ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">const element = &#123;</span><br><span class="line">	type:&quot;h1&quot;,</span><br><span class="line">	props:&#123;</span><br><span class="line">		title:&quot;foo&quot;,</span><br><span class="line">		children:&quot;hello&quot;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="React-createElement-æ–¹æ³•çš„å…·ä½“å®ç°"><a href="#React-createElement-æ–¹æ³•çš„å…·ä½“å®ç°" class="headerlink" title="React.createElement æ–¹æ³•çš„å…·ä½“å®ç°"></a>React.createElement æ–¹æ³•çš„å…·ä½“å®ç°</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">const element = </span><br><span class="line">	&lt;div id=&quot;foo&quot;&gt;</span><br><span class="line">		&lt;a&gt;bar&lt;/a&gt;</span><br><span class="line">		&lt;b/&gt;</span><br><span class="line">	&lt;/div&gt;</span><br><span class="line">React.createElement(&quot;div&quot;,&#123;</span><br><span class="line">	id:&quot;foo&quot;</span><br><span class="line">&#125;,</span><br><span class="line">	React.createElement(&quot;a&quot;,null,&quot;bar&quot;),</span><br><span class="line">	React.createElement(&quot;b&quot;)</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>createElementæ–¹æ³•çš„å…¥å‚ä¸º[type,props,children]ï¼Œè¿”å›çš„åˆ™æ˜¯ä¸€ä¸ªå›ºå®šçš„ç»“æ„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function createElement(type,props,...children)&#123;</span><br><span class="line">	//childrenæ˜¯ä¸€ä¸ªelementæ•°ç»„[React.createElement(&quot;a&quot;,null,&quot;bar&quot;),React.createElement(&quot;b&quot;)]</span><br><span class="line">	//ä¹Ÿå°±æ˜¯[&#123;type:&quot;a&quot;,props:&#123;children:&quot;bar&quot;&#125;&#125;,&#123;type:&quot;b&quot;&#125;]</span><br><span class="line">	return &#123;</span><br><span class="line">		type,</span><br><span class="line">		props:&#123;</span><br><span class="line">			...props,</span><br><span class="line">			children:children.map(child=&gt;typeof child === &quot;object&quot;?child:createTextElement(child))</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="React-createTextElement-æ–¹æ³•çš„å…·ä½“å®ç°"><a href="#React-createTextElement-æ–¹æ³•çš„å…·ä½“å®ç°" class="headerlink" title="React.createTextElement æ–¹æ³•çš„å…·ä½“å®ç°"></a>React.createTextElement æ–¹æ³•çš„å…·ä½“å®ç°</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function createTextElement(text)&#123;</span><br><span class="line">	return &#123;</span><br><span class="line">		type:&quot;TEXT_ELEMENT&quot;,</span><br><span class="line">		props:&#123;</span><br><span class="line">			nodeValue:text,</span><br><span class="line">			children:[]</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="React-render-æ–¹æ³•çš„å…·ä½“å®ç°ï¼Ÿ"><a href="#React-render-æ–¹æ³•çš„å…·ä½“å®ç°ï¼Ÿ" class="headerlink" title="React.render æ–¹æ³•çš„å…·ä½“å®ç°ï¼Ÿ"></a>React.render æ–¹æ³•çš„å…·ä½“å®ç°ï¼Ÿ</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function render(element,container)&#123;</span><br><span class="line">	//æ ¹æ®elementå¯¹è±¡çš„typeå±æ€§åˆ›å»ºèŠ‚ç‚¹</span><br><span class="line">	const dom = element.type === &#x27;TEXT_ELEMENT&#x27;? document.createTextNode(&quot;&quot;): document.createElement(element.type)</span><br><span class="line"></span><br><span class="line">	//å°†elementçš„propså±æ€§ä¸­çš„å±æ€§å€¼èµ‹ç»™èŠ‚ç‚¹</span><br><span class="line">	const isProperty = key =&gt; key !== &quot;children&quot;</span><br><span class="line">	Object.keys(element.props).filter(isProperty).forEach((name)=&gt; dom[name] = element.props[name])</span><br><span class="line"></span><br><span class="line">	//åŒæ ·çš„æ–¹æ³•å¤„ç†elementçš„children</span><br><span class="line">	element.props.children.forEach(child=&gt;&#123;render(child,dom)&#125;)</span><br><span class="line"></span><br><span class="line">	//å°†èŠ‚ç‚¹å¡å…¥å®¹å™¨ä¹‹ä¸­</span><br><span class="line">	container.appendChild(dom)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä½†æ˜¯ä¸Šè¿°renderæ–¹æ³•å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šä¸€æ—¦æ¸²æŸ“å¼€å§‹å°±æ— æ³•ä¸­æ­¢ï¼Œå¿…é¡»ç­‰åˆ°å…¨éƒ¨æ¸²æŸ“å®Œæˆåæ‰è¡Œ</p>
<h1 id="å¦‚ä½•è§£å†³renderæ— æ³•ä¸­æ­¢çš„é—®é¢˜ï¼Ÿ"><a href="#å¦‚ä½•è§£å†³renderæ— æ³•ä¸­æ­¢çš„é—®é¢˜ï¼Ÿ" class="headerlink" title="å¦‚ä½•è§£å†³renderæ— æ³•ä¸­æ­¢çš„é—®é¢˜ï¼Ÿ"></a>å¦‚ä½•è§£å†³renderæ— æ³•ä¸­æ­¢çš„é—®é¢˜ï¼Ÿ</h1><p>ä¸ºäº†èƒ½å¤Ÿä¸­æ­¢ï¼ŒæŠŠå·¥ä½œæµç¨‹æ‹†æˆä¸€ä¸ªä¸ªå•å…ƒï¼Œä½¿ç”¨æµè§ˆå™¨çš„ requestIdleCallback æ–¹æ³•æ¥ä»‹å…¥</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">let nextUnitOfWork = null</span><br><span class="line">function workLoop(deadline)&#123;</span><br><span class="line">	//åˆ¤æ–­ä¸­å¦è¦ä¸­æ­¢çš„æ ‡è¯†</span><br><span class="line">	let shouldYield = false</span><br><span class="line"></span><br><span class="line">	//å¦‚æœå­˜åœ¨ä¸‹ä¸€ä¸ªå·¥ä½œå•å…ƒï¼Œå¹¶ä¸”æµè§ˆå™¨æœ‰ç©ºé—²æ—¶é—´ï¼Œåˆ™æ‰§è¡Œ performUnitOfWork</span><br><span class="line">	while(nextUnitOfWork &amp;&amp; !shouldYield)&#123;</span><br><span class="line">		nextUnitOfWork = performUnitOfWork(nextUnitOfWork)</span><br><span class="line"></span><br><span class="line">		//åˆ¤æ–­æµè§ˆå™¨è·ç¦»ä¸‹ä¸€å¸§æ˜¯å¦æœ‰ç©ºé—²æ—¶é—´</span><br><span class="line">		shouldYield = deadline.timeRemaining() &lt; 1</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	if(!nextUnitOfWork &amp;&amp; wipRoot)&#123;</span><br><span class="line">		commitRoot()</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	requestIdleCallback(workLoop)</span><br><span class="line">&#125;</span><br><span class="line">requestIdleCallback(workLoop)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="ä¸ºäº†æ›´å¥½åœ°ç»„ç»‡å·¥ä½œå•å…ƒï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„-Fiber-Tree"><a href="#ä¸ºäº†æ›´å¥½åœ°ç»„ç»‡å·¥ä½œå•å…ƒï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„-Fiber-Tree" class="headerlink" title="ä¸ºäº†æ›´å¥½åœ°ç»„ç»‡å·¥ä½œå•å…ƒï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„ Fiber Tree"></a>ä¸ºäº†æ›´å¥½åœ°ç»„ç»‡å·¥ä½œå•å…ƒï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ•°æ®ç»“æ„ Fiber Tree</h1><h2 id="Fiber-çš„ç»“æ„"><a href="#Fiber-çš„ç»“æ„" class="headerlink" title="Fiber çš„ç»“æ„"></a>Fiber çš„ç»“æ„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">const fiber = &#123;</span><br><span class="line">	type:</span><br><span class="line">	props:&#123;</span><br><span class="line">		children:[]</span><br><span class="line">	&#125;</span><br><span class="line">	dom:</span><br><span class="line">	alternate:</span><br><span class="line">	effectTag: &quot;UPDATE&quot;|&quot;PLACEMENT&quot;|&quot;DELETION&quot;</span><br><span class="line">	parent:&#123;</span><br><span class="line">		type:</span><br><span class="line">		dom:</span><br><span class="line">	&#125;,</span><br><span class="line">	child:&#123;</span><br><span class="line">		type:</span><br><span class="line">		dom:</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>åœ¨renderæ–¹æ³•ä¸­åˆ›å»º root Fiber, å‰©ä½™å·¥ä½œä¼šåœ¨ performUnitOfWork æ–¹æ³•ä¸­æ‰§è¡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">let nextUnitOfWork = null</span><br><span class="line">let wipRoot = null</span><br><span class="line">let currentRoot = null</span><br><span class="line">let deletions = null</span><br><span class="line">function render(element,container)&#123;</span><br><span class="line">	wipRoot = &#123;</span><br><span class="line">		dom: container,</span><br><span class="line">		props: &#123;</span><br><span class="line">			children: [element]</span><br><span class="line">		&#125;,</span><br><span class="line">		alternate: currentRoot</span><br><span class="line">	&#125;</span><br><span class="line">	deletions = []</span><br><span class="line">	nextUnitOfWork = wipRoot</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="createDom-ï¼Œæ ¹æ®Fiberåˆ›å»ºDOMèŠ‚ç‚¹"><a href="#createDom-ï¼Œæ ¹æ®Fiberåˆ›å»ºDOMèŠ‚ç‚¹" class="headerlink" title="createDom ï¼Œæ ¹æ®Fiberåˆ›å»ºDOMèŠ‚ç‚¹"></a>createDom ï¼Œæ ¹æ®Fiberåˆ›å»ºDOMèŠ‚ç‚¹</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function createDom(fiber)&#123;</span><br><span class="line">	const dom = fiber.type === &#x27;TEXT_ELEMENT&#x27;?document.createTextNode(&quot;&quot;):document.createElement(fiber.type)</span><br><span class="line">	const isProperty = key =&gt; key !== &quot;children&quot;</span><br><span class="line">	Object.keys(element.props).filter(isProperty).forEach((name)=&gt; dom[name] = element.props[name])</span><br><span class="line">	return dom</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="performUnitOfWork-æ–¹æ³•"><a href="#performUnitOfWork-æ–¹æ³•" class="headerlink" title="performUnitOfWork æ–¹æ³•"></a>performUnitOfWork æ–¹æ³•</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">function performUnitOfWork(fiber)&#123;</span><br><span class="line">	//ä»¥ä¸‹æ–¹æ³•æ— æ³•å¤„ç†å‡½æ•°ç»„ä»¶</span><br><span class="line">	&lt;!-- //å¦‚æœæ²¡æœ‰domï¼Œåˆ™åˆ›å»ºdom</span><br><span class="line">	if(!fiber.dom)&#123;</span><br><span class="line">		fiber.dom = createDom(fiber)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	//å¦‚æœå­˜åœ¨çˆ¶èŠ‚ç‚¹ï¼Œåˆ™æŠŠæŒ‚è½½åˆ°çˆ¶èŠ‚ç‚¹ä¸Š</span><br><span class="line">	&lt;!-- ä½†æ˜¯è¿™ä¸ªæ–¹æ³•ä¼šå¯èƒ½ä¼šè®©ç”¨æˆ·çœ‹åˆ°æœªå®Œæˆçš„UIç•Œé¢ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåœ¨renderæ–¹æ³•ä¸­æˆ‘ä»¬åˆ›å»ºwipRoot(work in progress) --&gt;</span><br><span class="line">	&lt;!-- if(fiber.parent)&#123;</span><br><span class="line">		fiber.parent.dom.appendChild(fiber.dom)</span><br><span class="line">	&#125; --&gt;</span><br><span class="line"></span><br><span class="line">	//ä¸ºæ¯ä¸ªå­èŠ‚ç‚¹åˆ›å»º Fiber </span><br><span class="line">	const elements = fiber.props.children</span><br><span class="line"></span><br><span class="line">	//æ¯”è¾ƒ æ—§çš„fiber å’Œ æ–°çš„elements</span><br><span class="line">	reconcileChildren(fiber, elements) --&gt;</span><br><span class="line"></span><br><span class="line">	const isFunctionComponent = fiber.type instanceof Function</span><br><span class="line">	if(isFunctionComponent)&#123;</span><br><span class="line">		updateFunctionComponent(fiber)</span><br><span class="line">		&#125;else&#123;</span><br><span class="line">			updateHostComponent(fiber)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	//å¦‚æœæ˜¯å­èŠ‚ç‚¹åˆ™è¿”å›</span><br><span class="line">	if(fiber.child)&#123;</span><br><span class="line">		return fiber.child</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	//å¦‚æœä¸æ˜¯ï¼Œå†å»æ‰¾å…„å¼ŸèŠ‚ç‚¹ç­‰</span><br><span class="line">	let nextFiber = fiber</span><br><span class="line">	while(nextFiber)&#123;</span><br><span class="line">		if(nextFiber.sibling)&#123;</span><br><span class="line">			return nextFiber.sibling</span><br><span class="line">		&#125;</span><br><span class="line">		nextFiber = nextFiber.parent</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="ä»€ä¹ˆæ—¶å€™çœŸæ­£å»æ·»åŠ DOMèŠ‚ç‚¹ï¼Ÿ"><a href="#ä»€ä¹ˆæ—¶å€™çœŸæ­£å»æ·»åŠ DOMèŠ‚ç‚¹ï¼Ÿ" class="headerlink" title="ä»€ä¹ˆæ—¶å€™çœŸæ­£å»æ·»åŠ DOMèŠ‚ç‚¹ï¼Ÿ"></a>ä»€ä¹ˆæ—¶å€™çœŸæ­£å»æ·»åŠ DOMèŠ‚ç‚¹ï¼Ÿ</h1><p>å¦‚æœåœ¨ performUnitOfWork æ–¹æ³•ä¸­çœŸæ­£å»æ·»åŠ DOMèŠ‚ç‚¹ï¼Œç”¨æˆ·ä¼šçœ‹åˆ°æœªå®Œæˆçš„UIç•Œé¢ï¼Œå› æ­¤åœ¨ commitRoot æ–¹æ³•ä¸­æ·»åŠ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">function commitRoot()&#123;</span><br><span class="line">	//åˆ é™¤DOMèŠ‚ç‚¹</span><br><span class="line">	deletions.forEach(commitWork)</span><br><span class="line"></span><br><span class="line">	//æ·»åŠ DOMèŠ‚ç‚¹</span><br><span class="line">	commitWork(wipRoot.child)</span><br><span class="line"></span><br><span class="line">	//å®ç°äº†æ·»åŠ DOMèŠ‚ç‚¹ä¹‹åï¼Œæˆ‘ä»¬è¦å¦‚ä½•å»æ›´æ–°å’Œåˆ é™¤DOMèŠ‚ç‚¹ï¼Ÿæ­¤æ—¶éœ€è¦ä¸€ä¸ªæ–°çš„å¯¹è±¡å­˜å‚¨ä¸Šä¸€æ¬¡çš„Fiber Tree â€”â€” currentRoot </span><br><span class="line">	currentRoot = wipRoot</span><br><span class="line"></span><br><span class="line">	wipRoot = null</span><br><span class="line">&#125;</span><br><span class="line">function commitWork(fiber)&#123;</span><br><span class="line">	if(!fiber)&#123;</span><br><span class="line">		return</span><br><span class="line">	&#125;</span><br><span class="line">	&lt;!-- //æ— æ³•å¤„ç†å‡½æ•°ç»„ä»¶</span><br><span class="line">	const domParent = fiber.parent.dom --&gt;</span><br><span class="line"></span><br><span class="line">	let domParentFiber = fiber.parent</span><br><span class="line">	//å¯»æ‰¾å­˜åœ¨domçš„èŠ‚ç‚¹</span><br><span class="line">	while(!domParentFiber.dom)&#123;</span><br><span class="line">		domParentFiber = domParentFiber.parent</span><br><span class="line">	&#125;</span><br><span class="line">	const domParent = domParentFiber.dom</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	if(fiber.effectTag === &quot;PLACEMENT&quot; &amp;&amp; fiber.dom !== null)&#123;</span><br><span class="line">		//å¦‚æœæ˜¯æ·»åŠ DOMèŠ‚ç‚¹</span><br><span class="line">		domParent.appendChild(fiber.dom)</span><br><span class="line">	&#125;else if(fiber.effectTag === &quot;UPDATE&quot; &amp;&amp; fiber.dom !== null)&#123;</span><br><span class="line">		//å¦‚æœæ˜¯æ›´æ–°DOMèŠ‚ç‚¹</span><br><span class="line">		updateDom(fiber.dom,fiber.alternate.props,fiber.props)</span><br><span class="line">	&#125;else if(fiber.effectTag === &quot;DELETION&quot;)&#123;</span><br><span class="line">		//å¦‚æœæ˜¯åˆ é™¤DOMèŠ‚ç‚¹</span><br><span class="line">		&lt;!-- domParent.removeChild(fiber.dom) --&gt;</span><br><span class="line">		commitDeletion(fiber, domParent)</span><br><span class="line">	&#125;</span><br><span class="line">	commitWork(fiber.child)</span><br><span class="line">	commitWork(fiber.sibling)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">function commitDeletion(fiber,domParent)&#123;</span><br><span class="line">	if(fiber.dom)&#123;</span><br><span class="line">		domParent.removeChild(fiber.dom)</span><br><span class="line">	&#125;else&#123;</span><br><span class="line">		commitDeletion(fiber.child,domParent)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¦‚ä½•å»æ›´æ–°å’Œåˆ é™¤DOMèŠ‚ç‚¹ï¼Ÿåœ¨-performUnitOfWork-æ–¹æ³•ä¸­è°ƒç”¨-reconcileChildren-æ–¹æ³•å¤„ç†-fiber"><a href="#å¦‚ä½•å»æ›´æ–°å’Œåˆ é™¤DOMèŠ‚ç‚¹ï¼Ÿåœ¨-performUnitOfWork-æ–¹æ³•ä¸­è°ƒç”¨-reconcileChildren-æ–¹æ³•å¤„ç†-fiber" class="headerlink" title="å¦‚ä½•å»æ›´æ–°å’Œåˆ é™¤DOMèŠ‚ç‚¹ï¼Ÿåœ¨ performUnitOfWork æ–¹æ³•ä¸­è°ƒç”¨ reconcileChildren æ–¹æ³•å¤„ç† fiber"></a>å¦‚ä½•å»æ›´æ–°å’Œåˆ é™¤DOMèŠ‚ç‚¹ï¼Ÿåœ¨ performUnitOfWork æ–¹æ³•ä¸­è°ƒç”¨ reconcileChildren æ–¹æ³•å¤„ç† fiber</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">function reconcileChildren(wipFiber,elements)&#123;</span><br><span class="line">	let index = 0</span><br><span class="line">	let oldFiber = wipFiber.alternate &amp;&amp; wipFiber.alternate.child</span><br><span class="line">	let prevSibling = null</span><br><span class="line"></span><br><span class="line">	while(index &lt; elements.length || oldFiber !== null)&#123;</span><br><span class="line">		const element = elements[index]</span><br><span class="line">		let newFiber = null</span><br><span class="line">		const sameType = oldFiber &amp;&amp; element &amp;&amp; oldFiber.type == element.type</span><br><span class="line"></span><br><span class="line">		if(sameType)&#123;</span><br><span class="line">			newFiber = &#123;</span><br><span class="line">				type: oldFiber.type,</span><br><span class="line">				props: element.props,</span><br><span class="line">				dom: oldFiber.dom,</span><br><span class="line">				parent: wipFiber,</span><br><span class="line">				alternate: oldFiber,</span><br><span class="line">				effectTag: &quot;UPDATE&quot;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		if(element &amp;&amp; !sameType)&#123;</span><br><span class="line">			newFiber = &#123;</span><br><span class="line">				type: element.type,</span><br><span class="line">				props: element.props,</span><br><span class="line">				dom: null,</span><br><span class="line">				parent: wipFiber,</span><br><span class="line">				alternate: null,</span><br><span class="line">				effectTag: &quot;PLACEMENT&quot;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		if(oldFiber &amp;&amp; !sameType)&#123;</span><br><span class="line">			oldFiber.effectTag = &quot;DELETE&quot;</span><br><span class="line">			deletions.push(oldFiber)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		</span><br><span class="line">		if(index === 0)&#123;</span><br><span class="line">			//å¦‚æœæ˜¯ç¬¬ä¸€ä¸ªï¼Œåˆ™æ˜¯ wipFiber çš„å­èŠ‚ç‚¹</span><br><span class="line">			wipFiber.child = newFiber</span><br><span class="line">		&#125;else&#123;</span><br><span class="line">			//å…¶ä»–åˆ™æ˜¯å…„å¼ŸèŠ‚ç‚¹</span><br><span class="line">			prevSibling.sibling = newFiber</span><br><span class="line">		&#125;</span><br><span class="line">		prevSibling = newFiber</span><br><span class="line">		index++</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ›´æ–°-DOMèŠ‚ç‚¹-çš„æ–¹æ³•"><a href="#æ›´æ–°-DOMèŠ‚ç‚¹-çš„æ–¹æ³•" class="headerlink" title="æ›´æ–° DOMèŠ‚ç‚¹ çš„æ–¹æ³•"></a>æ›´æ–° DOMèŠ‚ç‚¹ çš„æ–¹æ³•</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">const isProperty = key =&gt; key !== &#x27;children&#x27;</span><br><span class="line">const isNew = (prev,next) =&gt; key =&gt; prev[key] !== next[key]</span><br><span class="line">const isGone = (prev,next) =&gt; key =&gt; !(key in next)</span><br><span class="line">const isEvent = key =&gt; key.startsWith(&quot;on&quot;)</span><br><span class="line">function updateDom(dom,prevProps,nextProps)&#123;</span><br><span class="line">	//åˆ é™¤æ—§çš„äº‹ä»¶æ–¹æ³•</span><br><span class="line">	Object.keys(prevProps)</span><br><span class="line">		.filter(isEvent)</span><br><span class="line">		.filter(key =&gt; !(key in nextProps) || isNew(prevProps,nextProps)(key))</span><br><span class="line">		.forEach(name =&gt; &#123;</span><br><span class="line">				const eventType = name.toLowerCase().substring(2)</span><br><span class="line">				dom.removeEventListener(eventType,prevProps[name])</span><br><span class="line">			&#125;)</span><br><span class="line"></span><br><span class="line">	//åˆ é™¤ä¸è¦çš„å±æ€§</span><br><span class="line">	Object.keys(prevProps)</span><br><span class="line">		.filter(isProperty)</span><br><span class="line">		.filter(isGone)</span><br><span class="line">		.forEach(name=&gt;&#123;</span><br><span class="line">				dom[name] = &quot;&quot;</span><br><span class="line">			&#125;)</span><br><span class="line"></span><br><span class="line">	//æ·»åŠ æ–°çš„äº‹ä»¶æ–¹æ³•</span><br><span class="line">	Object.keys(nextProps)</span><br><span class="line">		.filter(isEvent)</span><br><span class="line">		.filter(isNew(prevProps,nextProps))</span><br><span class="line">		.forEach(name =&gt; &#123;</span><br><span class="line">				const eventType = name.toLowerCase().substring(2)</span><br><span class="line">				dom.addEventListener(eventType,nextProps[name])</span><br><span class="line">			&#125;)</span><br><span class="line"></span><br><span class="line">	//æ·»åŠ æ–°çš„å±æ€§		</span><br><span class="line">	Object.keys(nextProps)</span><br><span class="line">		.filter(isProperty)</span><br><span class="line">		.filter(isNew(prevProps,nextProps))</span><br><span class="line">		.forEach(name=&gt;&#123;</span><br><span class="line">			//å¢åŠ æ–°çš„å±æ€§</span><br><span class="line">			dom[name] = nextProps[name]</span><br><span class="line">			&#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="updateHostComponent-å’Œ-updateFunctionComponent"><a href="#updateHostComponent-å’Œ-updateFunctionComponent" class="headerlink" title="updateHostComponent å’Œ updateFunctionComponent"></a>updateHostComponent å’Œ updateFunctionComponent</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function updateHostComponent(fiber)&#123;</span><br><span class="line">	if(!fiber.dom)&#123;</span><br><span class="line">		fiber.dom = createDom(fiber)</span><br><span class="line">	&#125;</span><br><span class="line">	reconcileChildren(fiber,fiber.props.children)</span><br><span class="line">&#125;</span><br><span class="line">function updateFunctionComponent(fiber)&#123;</span><br><span class="line">	const children = [fiber.type(fiber.props)]</span><br><span class="line">	reconcileChildren(fiber,children)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¦‚ä½•æ·»åŠ -Hooks"><a href="#å¦‚ä½•æ·»åŠ -Hooks" class="headerlink" title="å¦‚ä½•æ·»åŠ  Hooks"></a>å¦‚ä½•æ·»åŠ  Hooks</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function Counter()&#123;</span><br><span class="line">	const [state,setState] = React.useState(1)</span><br><span class="line">	return &lt;h1 onClick=&#123;()=&gt;setState(c =&gt; c+1)&#125;&gt;</span><br><span class="line">		Count:&#123;state&#125;</span><br><span class="line">	&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æ›´æ”¹ updateFunctionComponent </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">let wipFiber = null</span><br><span class="line">let hookIndex = null</span><br><span class="line">function updateFunctionComponent(fiber)&#123;</span><br><span class="line">	wipFiber = fiber</span><br><span class="line">	hookIndex = 0</span><br><span class="line">	wipFiber.hooks = []</span><br><span class="line">	const children = [fiber.type(fiber.props)]</span><br><span class="line">	reconcileChildren(fiber,children)</span><br><span class="line">&#125;</span><br><span class="line">function useState(initial)&#123;</span><br><span class="line">	const oldHook = wipFiber.alternate &amp;&amp; wipFiber.alternate.hooks &amp;&amp; wipFiber.alternate.hooks[hookIndex]</span><br><span class="line">	const hook = &#123; state: oldHook ? oldHook.state : initial, queue:[]&#125;</span><br><span class="line"></span><br><span class="line">	//å¦‚ä½•æ›´æ–°stateçš„å€¼ï¼Ÿ</span><br><span class="line">	const actions = oldHook ? oldHook.queue : []</span><br><span class="line">	actions.forEach(action =&gt; &#123;</span><br><span class="line">		hook.state = action(hook.state)</span><br><span class="line">		&#125;)</span><br><span class="line"></span><br><span class="line">	const setState = action =&gt; &#123;</span><br><span class="line">		hook.queue.push(action)</span><br><span class="line">		wipRoot = &#123;</span><br><span class="line">			dom: currentRoot.dom,</span><br><span class="line">			props: currentRoot.props,</span><br><span class="line">			alternate: currentRoot,</span><br><span class="line">		&#125;</span><br><span class="line">		nextUnitOfWork = wipRoot</span><br><span class="line">		deletions = []</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	wipFiber.hooks.push(hook)</span><br><span class="line">	hookIndex++</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	return [hook.state]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>










      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/12/02/npm%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="John Doe">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hexo">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/12/02/npm%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" class="post-title-link" itemprop="url">npmå¸¸ç”¨å‘½ä»¤</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-12-02 23:07:42" itemprop="dateCreated datePublished" datetime="2021-12-02T23:07:42+08:00">2021-12-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-12-06 17:45:21" itemprop="dateModified" datetime="2021-12-06T17:45:21+08:00">2021-12-06</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="npm-install-å®‰è£…æ¨¡å—"><a href="#npm-install-å®‰è£…æ¨¡å—" class="headerlink" title="npm install å®‰è£…æ¨¡å—"></a>npm install å®‰è£…æ¨¡å—</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm i xxx -S/--save, å®‰è£…åˆ°dependenciesã€ç”Ÿäº§ç¯å¢ƒã€‘</span><br><span class="line">npm i xxx -D/--save-dev, devDependenciesã€å¼€å‘ç¯å¢ƒã€‘</span><br><span class="line">npm i xxx -O/--save-optional, optionalDependenciesã€å¯é€‰é˜¶æ®µçš„ä¾èµ–ã€‘</span><br><span class="line">npm i xxx -E/--save-exact, ç²¾ç¡®å®‰è£…æŒ‡å®šæ¨¡å—ç‰ˆæœ¬ï¼Œç‰ˆæœ¬å·å‰é¢æ— ^</span><br><span class="line">npm install xxx -g, å…¨å±€å®‰è£…</span><br></pre></td></tr></table></figure>
<h2 id="npm-uninstall-å¸è½½æ¨¡å—"><a href="#npm-uninstall-å¸è½½æ¨¡å—" class="headerlink" title="npm uninstall å¸è½½æ¨¡å—"></a>npm uninstall å¸è½½æ¨¡å—</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall xxx --save-dev</span><br></pre></td></tr></table></figure>
<h2 id="npm-update-æ›´æ–°æ¨¡å—"><a href="#npm-update-æ›´æ–°æ¨¡å—" class="headerlink" title="npm update æ›´æ–°æ¨¡å—"></a>npm update æ›´æ–°æ¨¡å—</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm update xxx</span><br></pre></td></tr></table></figure>

<h2 id="npm-ls-æŸ¥çœ‹å®‰è£…çš„æ¨¡å—"><a href="#npm-ls-æŸ¥çœ‹å®‰è£…çš„æ¨¡å—" class="headerlink" title="npm ls æŸ¥çœ‹å®‰è£…çš„æ¨¡å—"></a>npm ls æŸ¥çœ‹å®‰è£…çš„æ¨¡å—</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm ls antd</span><br><span class="line">npm ls antd -gã€æŸ¥çœ‹å…¨å±€ã€‘</span><br><span class="line">aliases: list, la, ll</span><br></pre></td></tr></table></figure>

<h2 id="npm-view-npm-info-æŸ¥çœ‹æ¨¡å—æ³¨å†Œä¿¡æ¯"><a href="#npm-view-npm-info-æŸ¥çœ‹æ¨¡å—æ³¨å†Œä¿¡æ¯" class="headerlink" title="npm view/npm info æŸ¥çœ‹æ¨¡å—æ³¨å†Œä¿¡æ¯"></a>npm view/npm info æŸ¥çœ‹æ¨¡å—æ³¨å†Œä¿¡æ¯</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm view antd versions</span><br><span class="line">npm view antd version  æŸ¥çœ‹åŒ…çš„æœ€æ–°ç‰ˆæœ¬</span><br><span class="line">npm view antd dependencies æŸ¥çœ‹æ¨¡å—ä¾èµ–å…³ç³»</span><br><span class="line">npm view antd repository.url æŸ¥çœ‹æ¨¡å—çš„æºæ–‡ä»¶åœ°å€</span><br><span class="line">alias:v, info, show</span><br></pre></td></tr></table></figure>
<h2 id="npm-root-æŸ¥çœ‹åŒ…çš„å®‰è£…è·¯å¾„"><a href="#npm-root-æŸ¥çœ‹åŒ…çš„å®‰è£…è·¯å¾„" class="headerlink" title="npm root æŸ¥çœ‹åŒ…çš„å®‰è£…è·¯å¾„"></a>npm root æŸ¥çœ‹åŒ…çš„å®‰è£…è·¯å¾„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm root antd</span><br></pre></td></tr></table></figure>
<h2 id="npm-config-ç®¡ç†npmçš„é…ç½®è·¯å¾„"><a href="#npm-config-ç®¡ç†npmçš„é…ç½®è·¯å¾„" class="headerlink" title="npm config ç®¡ç†npmçš„é…ç½®è·¯å¾„"></a>npm config ç®¡ç†npmçš„é…ç½®è·¯å¾„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm config -h</span><br><span class="line">npm config list</span><br><span class="line">npm get registry</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">John Doe</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">John Doe</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
